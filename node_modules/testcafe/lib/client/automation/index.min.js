window["%hammerhead%"].utils.removeInjectedScript(),function hu(fu){var du=fu.document;!function(t,g,e,i){var h="default"in t?t.default:t,y="default"in g?g.default:g;e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;var o={};function n(t){var e=t/2;return e<1?0:Math.round(e)}function c(t){var e=g.positionUtils.getElementRectangle(t);return{offsetX:n(e.width),offsetY:n(e.height)}}function r(t,e,n){var i=c(t);if(e="number"==typeof e?Math.round(e):i.offsetX,n="number"==typeof n?Math.round(n):i.offsetY,0<e&&0<n)return{offsetX:e,offsetY:n};var o=g.positionUtils.getClientDimensions(t),r=Math.round(Math.max(t.scrollWidth,o.width)),s=Math.round(Math.max(t.scrollHeight,o.height)),l=o.scrollbar.right+o.border.left+o.border.right+r,a=o.scrollbar.bottom+o.border.top+o.border.bottom+s;return{offsetX:e<0?l+e:e,offsetY:n<0?a+n:n}}var s=h.nativeMethods,l=h.Promise,a=y.domUtils,u=y.ScrollAutomation;!function(t){for(var e=0,n=Object.keys(t);e<n.length;e++){var i=n[e];o[i]=t[i]}}({PromiseCtor:l,nativeMethods:s,scroll:function(t,e){return new u(t,e).run()},getOffsetOptions:r,isDomElement:a.isDomElement});var f=h.nativeMethods,d=/^((mouse\w+)|((dbl)?click)|(contextmenu))$/,m=/^((drag\w*)|(drop))$/,p=/^key\w+$/,v=/^(before)?input$/,E=/^(blur|(focus(in|out)?))$/,S=/^pointer\w+/,b={click:1,dblclick:2,mousedown:1,mouseup:1},_="MouseEvent",P="PointerEvent",A="KeyboardEvent",w="InputEvent",x="FocusEvent",C=(T.prototype.run=function(){var t=this.options,e=t.bubbles,n=t.cancelable,i=t.detail,o=(t.view,t.buttons),e=!1!==e,n=!1!==n,i=i||b[this.eventName],o=void 0===o?1:o;Object.assign(this.options,{bubbles:e,cancelable:n,detail:i,view:fu,buttons:o});var r,s=T._getEventCtorByEventType(this.eventName,this.options.eventConstructor);s&&(r=new s(this.eventName,this.options),this.element.dispatchEvent(r))},T._getEventCtorByEventType=function(t,e){if(e&&"function"==typeof T._getEventCtorFromWindow(e)){var n=T._getEventCtorFromNativeMethods(e);if(n&&"function"==typeof n)return n}return d.test(t)||m.test(t)?T._getEventCtorFromNativeMethods(_):S.test(t)?T._getEventCtorFromNativeMethods(P):p.test(t)?T._getEventCtorFromNativeMethods(A):v.test(t)?T._getEventCtorFromNativeMethods(w):E.test(t)?T._getEventCtorFromNativeMethods(x):T._getEventCtorFromNativeMethods("CustomEvent")},T._getEventCtorFromNativeMethods=function(t){return f["Window"+t]||T._getEventCtorFromWindow(t)},T._getEventCtorFromWindow=function(t){return fu[t]},T);function T(t,e,n){this.element=t,this.eventName=e,this.options=n}var M=function(t,e){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function U(t,e){function n(){this.constructor=t}M(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function D(t,s,l,a){return new(l=l||e)(function(n,e){function i(t){try{r(a.next(t))}catch(t){e(t)}}function o(t){try{r(a.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof l?e:new l(function(t){t(e)})).then(i,o)}r((a=a.apply(t,s||[])).next())})}function I(n,i){var o,r,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,r=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=i.call(n,l)}catch(t){e=[6,t],r=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var k=h.utils.browser;function O(t,e,n){var i=k.isFirefox?Math.ceil:Math.round,o=g.positionUtils.getOffsetPosition(t,i);return{x:(t===du.documentElement?0:o.left)+e,y:(t===du.documentElement?0:o.top)+n}}function B(t){if(!t)return null;var e=fu.screenLeft||fu.screenX,n=fu.screenTop||fu.screenY;return{x:e+t.x,y:n+t.y}}function N(t){return t.top!==t}var F=h.utils.browser,Y=h.Promise,K=h.nativeMethods,L=y.positionUtils,V=y.domUtils;function X(t,e){var n=null;return i.hide(e).then(function(){return n=L.getElementFromPoint(t.x,t.y),i.show(e)}).then(function(){return n})}function R(t,e,n){var i=L.getElementFromPoint(t,e),o=V.containsElement(n,i)&&K.nodeTextContentGetter.call(i).length;return i&&i===n||o?i:null}function W(t,e){if(!e||!V.isDomElement(e)||!t||t===e)return t;if("tref"===V.getTagName(e))return e;var n,i,o,r="area"===V.getTagName(e)&&V.isImgElement(t);if(F.isFirefox&&r)return n=t,i=e,(o=V.closest(i,"map"))&&o.name===n.useMap.substring(1)?i:n;var s=V.isAnchorElement(e)||V.getParents(e,"a").length,l=s&&V.containsElement(e,t)&&K.nodeTextContentGetter.call(t).length;if(!s||l||!K.nodeTextContentGetter.call(e).length)return t;var a=e.getBoundingClientRect();return R(a.right-1,a.top+1,e)||R(a.left+1,a.bottom-1,e)||t}function H(i,o){return X(i).then(function(t){var e=t,n=Y.resolve(t);return!e&&N(fu)&&0<i.x&&0<i.y&&(n=n.then(function(){return X(i,!0)}).then(function(t){return t})),n.then(function(t){return W(t,o)})})}var G={elementIsInvisibleError:"elementIsInvisibleError",foundElementIsNotTarget:"foundElementIsNotTarget"},q=(Object.defineProperty(z.prototype,"mouseActionStepDelay",{get:function(){return 1===this._speedFactor?10:400*(1-this._speedFactor)},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"keyActionStepDelay",{get:function(){return 1===this._speedFactor?10:200*(1-this._speedFactor)},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"cursorSpeed",{get:function(){return Math.pow(400,this._speedFactor)/4},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"draggingSpeed",{get:function(){return Math.pow(16,this._speedFactor)/4},enumerable:!1,configurable:!0}),z);function z(t){this._speedFactor=t||1}var j=($.prototype._getAssignableProperties=function(){throw new Error("Not implemented")},$.prototype._assignFrom=function(t,e,n){if(void 0===n&&(n={}),t)for(var i=this._getAssignableProperties(),o=0;o<i.length;o++){for(var r,s=i[o],l=s.name,a=s.type,u=s.required,c=s.init,h=s.defaultValue,f=l.split("."),d=f.length-1,m=f[d],p=t,v=this,g=0;g<d&&p&&v;g++)p=p[f[g]],v=v[f[g]];v&&"defaultValue"in i[o]&&(v[l]=h),p&&v&&(void 0===(r=p[m])&&!u||(e&&a&&a(l,r),v[m]=c?c(l,r,n,e):r))}},$);function $(){}function Z(i){return function(t,e){var n=typeof e;if("number"!=n)throw new i(t,n);if(isNaN(e)||!isFinite(e)||e!==Math.floor(e))throw new i(t,e)}}function J(t,e){this.code=t,this.isTestCafeError=!0,this.callsite=e||null}var Q,tt,et,nt="E1",it="E4",ot="E5",rt="E9",st="E10",lt="E11",at="E12",ut="E24",ct="E26",ht="E27",ft="E28",dt="E29",mt="E30",pt="E31",vt="E32",gt="E33",Et="E34",yt="E35",St="E36",bt="E37",_t="E39",Pt="E40",At="E41",wt="E42",xt="E43",Ct="E44",Tt="E45",Mt="E46",Ut="E49",Dt="E50",It="E51",kt="E52",Ot="E57",Bt="E64",Nt="E65",Ft="E68",Yt="E69",Kt="E70",Lt="E71",Vt="E72",Xt="E73",Rt="E74",Wt="E76",Ht="E77",Gt="E78",qt="E82",zt="E83",jt=(U($t,Q=J),$t);function $t(t,e,n){var i=Q.call(this,t)||this;return i.optionName=e,i.actualValue=n,i}function Zt(t,e){var n=tt.call(this,Ut,e)||this;return n.instantiationCallsiteName=t,n}function Jt(t,e){var n=et.call(this,Dt,e)||this;return n.instantiationCallsiteName=t,n}U(Zt,tt=J),U(Jt,et=J);var Qt,te,ee,ne,ie,oe,re,se,le=(U(ae,Qt=J),ae);function ae(t,e,n){var i=e.apiFnChain,o=e.apiFnIndex,r=Qt.call(this,t,n)||this;return r.apiFnChain=i,r.apiFnIndex=o,r}function ue(t){return te.call(this,It,t)||this}function ce(t,e){return ee.call(this,kt,e,t)||this}function he(t,e){var n=ne.call(this,nt)||this;return n.errStack=t,n.pageDestUrl=e,n}function fe(t,e,n){var i=ie.call(this,it,n)||this;return i.errMsg=String(e),i.instantiationCallsiteName=t,i}function de(t,e,n,i){var o=oe.call(this,ot,i)||this;return o.errMsg=String(e),o.property=n,o.instantiationCallsiteName=t,o}function me(t){var e=re.call(this,Bt)||this;return e.errMsg=String(t),e}function pe(t,e){var n=se.call(this,Nt)||this;return n.errMsg=String(t),n.moduleName=e,n}U(ue,te=J),U(ce,ee=le),U(he,ne=J),U(fe,ie=J),U(de,oe=J),U(me,re=J),U(pe,se=J);var ve,ge=(U(Ee,ve=jt),Ee);function Ee(t,e){return ve.call(this,rt,t,e)||this}var ye,Se=(U(be,ye=jt),be);function be(t,e){return ye.call(this,st,t,e)||this}var _e,Pe=(U(Ae,_e=jt),Ae);function Ae(t,e){return _e.call(this,lt,t,e)||this}var we,xe,Ce,Te,Me,Ue,De,Ie,ke,Oe,Be,Ne,Fe,Ye,Ke,Le,Ve,Xe,Re,We,He,Ge,qe,ze,je,$e,Ze,Je,Qe,tn,en,nn,on,rn,sn,ln=(U(an,we=jt),an);function an(t,e){return we.call(this,at,t,e)||this}function un(t,e){return xe.call(this,ut,e,t)||this}function cn(t){return Ce.call(this,ct,t)||this}function hn(t){var e=Te.call(this,ht)||this;return e.nodeDescription=t,e}function fn(t,e){var n=Me.call(this,ft,e)||this;return n.argumentName=t,n}function dn(t){var e=Ue.call(this,dt)||this;return e.argumentName=t,e}function mn(t,e){var n=De.call(this,mt)||this;return n.argumentName=t,n.nodeDescription=e,n}function pn(){return Ie.call(this,pt)||this}function vn(){return ke.call(this,vt)||this}function gn(t){var e=Oe.call(this,gt)||this;return e.argumentName=t,e}function En(){return Be.call(this,yt)||this}function yn(t){var e=Ne.call(this,St)||this;return e.argumentName=t,e}function Sn(t,e){var n=Fe.call(this,bt)||this;return n.filePaths=t,n.scannedFilePaths=e,n}function bn(){return Ye.call(this,Et)||this}function _n(t,e){var n=Ke.call(this,At)||this;return n.properties=t?"scrollTargetY property":e?"scrollTargetX property":"scrollTargetX and scrollTargetY properties",n}function Pn(t,e){var n=Le.call(this,Ot)||this;return t<=0?e<=0?(n.verb="are",n.dimensions="width and height"):(n.verb="is",n.dimensions="width"):(n.verb="is",n.dimensions="height"),n}function An(t){return Ve.call(this,Pt,t)||this}function wn(){return Xe.call(this,_t)||this}function xn(){return Re.call(this,wt)||this}function Cn(){return We.call(this,Yt)||this}function Tn(){return He.call(this,Ft)||this}function Mn(){return Ge.call(this,Kt)||this}function Un(){return qe.call(this,Lt)||this}function Dn(){return ze.call(this,Xt)||this}function In(){return je.call(this,qt)||this}function kn(t){var e=$e.call(this,Gt)||this;return e.errMsg=t,e}function On(){return Ze.call(this,Rt)||this}function Bn(){return Je.call(this,Wt)||this}function Nn(){return Qe.call(this,Ht)||this}function Fn(){return tn.call(this,Vt)||this}function Yn(){return en.call(this,zt)||this}function Kn(){return nn.call(this,xt)||this}function Ln(){return on.call(this,Ct)||this}function Vn(t,e){var n=rn.call(this,Tt)||this;return n.dialogType=t,n.pageUrl=e,n}function Xn(t,e,n){var i=sn.call(this,Mt)||this;return i.dialogType=t,i.errMsg=e,i.pageUrl=n,i}U(un,xe=le),U(cn,Ce=J),U(hn,Te=J),U(fn,Me=le),U(dn,Ue=J),U(mn,De=J),U(pn,Ie=J),U(vn,ke=J),U(gn,Oe=J),U(En,Be=J),U(yn,Ne=J),U(Sn,Fe=J),U(bn,Ye=J),U(_n,Ke=J),U(Pn,Le=J),U(An,Ve=J),U(wn,Xe=J),U(xn,Re=J),U(Cn,We=J),U(Tn,He=J),U(Mn,Ge=J),U(Un,qe=J),U(Dn,ze=J),U(In,je=J),U(kn,$e=J),U(On,Ze=J),U(Bn,Je=J),U(Nn,Qe=J),U(Fn,tn=J),U(Yn,en=J),U(Kn,nn=J),U(Ln,on=J),U(Vn,rn=J),U(Xn,sn=J);var Rn,Wn,Hn,Gn,qn,zn=Z(ge),jn=(Wn=Z(Rn=Se),function(t,e){if(Wn(t,e),e<0)throw new Rn(t,e)}),$n=(Hn=Pe,function(t,e){var n=typeof e;if("boolean"!=n)throw new Hn(t,n)}),Zn=(Gn=ln,function(t,e){var n=typeof e;if("number"!=n)throw new Gn(t,n);if(isNaN(e)||e<.01||1<e)throw new Gn(t,e)}),Jn=(U(Qn,qn=j),Qn.prototype._getAssignableProperties=function(){return[{name:"speed",type:Zn}]},Qn);function Qn(t,e){var n=qn.call(this)||this;return n.speed=null,n._assignFrom(t,e),n}var ti,ei=(U(ni,ti=Jn),ni.prototype._getAssignableProperties=function(){return ti.prototype._getAssignableProperties.call(this).concat([{name:"offsetX",type:zn},{name:"offsetY",type:zn}])},ni);function ni(t,e){var n=ti.call(this)||this;return n.offsetX=null,n.offsetY=null,n._assignFrom(t,e),n}var ii,oi,ri=(U(si,ii=ei),si.prototype._getAssignableProperties=function(){return ii.prototype._getAssignableProperties.call(this).concat([{name:"scrollToCenter",type:$n},{name:"skipParentFrames",type:$n}])},si);function si(t,e){var n=ii.call(this)||this;return n.scrollToCenter=!1,n.skipParentFrames=!1,n._assignFrom(t,e),n}function li(t,e){var n=oi.call(this)||this;return n.scrollTargetX=null,n.scrollTargetY=null,n.includeMargins=!1,n.includeBorders=!0,n.includePaddings=!0,n.crop={left:null,right:null,top:null,bottom:null},n._assignFrom(t,e),n}U(li,oi=Jn),li.prototype._getAssignableProperties=function(){return oi.prototype._getAssignableProperties.call(this).concat([{name:"scrollTargetX",type:zn},{name:"scrollTargetY",type:zn},{name:"crop.left",type:zn},{name:"crop.right",type:zn},{name:"crop.top",type:zn},{name:"crop.bottom",type:zn},{name:"includeMargins",type:$n},{name:"includeBorders",type:$n},{name:"includePaddings",type:$n}])};var ai,ui=(U(ci,ai=ei),ci.prototype._getAssignableProperties=function(){return ai.prototype._getAssignableProperties.call(this).concat([{name:"modifiers.ctrl",type:$n},{name:"modifiers.alt",type:$n},{name:"modifiers.shift",type:$n},{name:"modifiers.meta",type:$n}])},ci);function ci(t,e){var n=ai.call(this)||this;return n.modifiers={ctrl:!1,alt:!1,shift:!1,meta:!1},n._assignFrom(t,e),n}var hi,fi=(U(di,hi=ui),di.prototype._getAssignableProperties=function(){return hi.prototype._getAssignableProperties.call(this).concat([{name:"caretPos",type:jn}])},di);function di(t,e){var n=hi.call(this)||this;return n.caretPos=null,n._assignFrom(t,e),n}var mi,pi=(U(vi,mi=ui),vi.prototype._getAssignableProperties=function(){return mi.prototype._getAssignableProperties.call(this).concat([{name:"speed"},{name:"minMovingTime"},{name:"holdLeftButton"},{name:"skipScrolling",type:$n},{name:"skipDefaultDragBehavior",type:$n}])},vi);function vi(t,e){var n=mi.call(this)||this;return n.speed=null,n.minMovingTime=null,n.holdLeftButton=!1,n.skipScrolling=!1,n.skipDefaultDragBehavior=!1,n._assignFrom(t,e),n}var gi,Ei,yi,Si,bi,_i=(U(Pi,gi=fi),Pi.prototype._getAssignableProperties=function(){return gi.prototype._getAssignableProperties.call(this).concat([{name:"replace",type:$n},{name:"paste",type:$n},{name:"confidential",type:$n}])},Pi);function Pi(t,e){var n=gi.call(this)||this;return n.replace=!1,n.paste=!1,n.confidential=void 0,n._assignFrom(t,e),n}function Ai(t,e){var n=Ei.call(this,t,e)||this;return n.destinationOffsetX=null,n.destinationOffsetY=null,n._assignFrom(t,e),n}function wi(t,e){var n=yi.call(this)||this;return n.portraitOrientation=!1,n._assignFrom(t,e),n}function xi(t,e){var n=Si.call(this)||this;return n.timeout=void 0,n.allowUnawaitedPromise=!1,n._assignFrom(t,e),n}function Ci(t,e){var n=bi.call(this)||this;return n.confidential=void 0,n._assignFrom(t,e),n}U(Ai,Ei=ui),Ai.prototype._getAssignableProperties=function(){return Ei.prototype._getAssignableProperties.call(this).concat([{name:"destinationOffsetX",type:zn},{name:"destinationOffsetY",type:zn}])},U(wi,yi=j),wi.prototype._getAssignableProperties=function(){return[{name:"portraitOrientation",type:$n}]},U(xi,Si=j),xi.prototype._getAssignableProperties=function(){return[{name:"timeout",type:jn},{name:"allowUnawaitedPromise",type:$n}]},U(Ci,bi=Jn),Ci.prototype._getAssignableProperties=function(){return bi.prototype._getAssignableProperties.call(this).concat([{name:"confidential",type:$n}])};var Ti=(Mi.create=function(t){return"left"in t?new Mi(t.left,t.top):"right"in t?new Mi(t.right,t.bottom):new Mi(t.x,t.y)},Mi.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},Mi.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},Mi.prototype.round=function(t){return void 0===t&&(t=Math.round),this.x=t(this.x),this.y=t(this.y),this},Mi.prototype.eql=function(t){return this.x===t.x&&this.y===t.y},Mi.prototype.mul=function(t){return this.x*=t,this.y*=t,this},Mi.prototype.distance=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},Mi);function Mi(t,e){this.x=t,this.y=e}var Ui=(Di.prototype._ensureActiveWindow=function(t){this._activeWindow!==t&&this._activeWindow!==t.parent&&this._activeWindow.parent!==t&&(this._activeWindow=t)},Di.prototype.isActive=function(t){return this._ensureActiveWindow(t),this._activeWindow===t},Di.prototype.setActiveWindow=function(t){this._activeWindow=t},Di.prototype.getActiveWindow=function(t){return this._ensureActiveWindow(t),this._activeWindow},Di.prototype.getPosition=function(){return new Ti(this._x,this._y)},Di.prototype.move=function(t){return this._x=t.x,this._y=t.y,this._ui.move(t)},Di.prototype.hide=function(){return this._ui.hide?this._ui.hide():o.PromiseCtor.resolve()},Di.prototype.show=function(){return this._ui.show?this._ui.show():o.PromiseCtor.resolve()},Di.prototype.leftButtonDown=function(){return this._ui.leftButtonDown()},Di.prototype.rightButtonDown=function(){return this._ui.rightButtonDown()},Di.prototype.buttonUp=function(){return this._ui.buttonUp()},Di);function Di(t,e){this._ui=e,this._x=-1,this._y=-1,this._activeWindow=t}var Ii=N(fu)?i.iframeCursorUI:i.cursorUI,ki=new Ui(fu.top,Ii);function Oi(t,e,n){var i=function(t,e,n){if(e.y-t.y==0)return 0;var i=(e.x-t.x)/(e.y-t.y),o=t.y*(t.x-e.x)/(e.y-t.y)+t.x;return Math.round(i*n+o)}(t,e,n.top);return i&&i>=n.left&&i<=n.right?new Ti(i,n.top):null}function Bi(t,e,n){var i=function(t,e,n){if(e.x===t.x)return 0;var i=(e.y-t.y)/(e.x-t.x),o=t.x*(t.y-e.y)/(e.x-t.x)+t.y;return Math.round(i*n+o)}(t,e,n.left);return i&&i>=n.top&&i<=n.bottom?new Ti(n.left,i):null}function Ni(t,e,n){for(var i=[],o=0,r=[{left:n.left,top:n.top,right:n.left,bottom:n.bottom,isHorizontal:!1},{left:n.right,top:n.top,right:n.right,bottom:n.bottom,isHorizontal:!1},{left:n.left,top:n.top,right:n.right,bottom:n.top,isHorizontal:!0},{left:n.left,top:n.bottom,right:n.right,bottom:n.bottom,isHorizontal:!0}];o<r.length;o++){var s=r[o],l=(s.isHorizontal?Oi:Bi)(t,e,s);l&&i.push(l)}return i.length?1===i.length||i[0].distance(t)<i[1].distance(t)?i[0]:i[1]:null}var Fi=h.Promise,Yi=h.nativeMethods;function Ki(){return new Fi(function(t){return Yi.setTimeout.call(fu,t,0)})}var Li=h.utils.browser,Vi=(Xi.prototype.setup=function(){this.dragAndDropMode=!1,this.dropAllowed=!1},Xi.prototype.leaveElement=function(){},Xi.prototype.move=function(){},Xi.prototype.enterElement=function(){},Xi.prototype.dragAndDrop=function(){},Xi.prototype.teardown=function(){},Xi.prototype.run=function(t,e,n,i,o){var r=e&&g.domUtils.isElementInDocument(e),s=e&&g.domUtils.isElementInIframe(e)&&!g.domUtils.getIframeByElement(e);r&&!s||(e=null);var l=t!==e,a=l?g.domUtils.getCommonAncestor(t,e):null;this.setup(),l&&e&&this.leaveElement(t,e,a,n),Li.isIE&&this.move(t,n),l&&g.domUtils.isElementInDocument(t)&&this.enterElement(t,e,a,n),Li.isIE||this.move(t,n),this.dragAndDrop(i,t,e,n,o),this.teardown(t,n,e);var u=this.dragAndDropMode,c=this.dropAllowed;return this.dragAndDropMode=!1,this.dropAllowed=!1,{dragAndDropMode:u,dropAllowed:c}},Xi);function Xi(t){var e=t.moveEvent;this.dragAndDropMode=!1,this.dropAllowed=!1,this.moveEvent=e}var Ri=h.eventSandbox.eventSimulator,Wi=h.utils.extend,Hi=h.nativeMethods,Gi=(qi.leaveElement=function(t,e,n,i){Ri.mouseout(e,Wi({relatedTarget:t},i));for(var o=e;o&&o!==n;)Ri.mouseleave(o,Wi({relatedTarget:t},i)),o=Hi.nodeParentNodeGetter.call(o)},qi.enterElement=function(t,e,n,i){Ri.mouseover(t,Wi({relatedTarget:e},i));for(var o=t,r=[];o&&o!==n;)r.push(o),o=g.domUtils.getParentExceptShadowRoot(o);for(var s=r.length-1;-1<s;s--)Ri.mouseenter(r[s],Wi({relatedTarget:e},i))},qi.move=function(t,e,n){Ri[t](e,n)},qi);function qi(){}var zi=(ji.dragAndDrop=function(t,e,n,i){return Ri.drag(t,i),e!==n&&(g.domUtils.isElementInDocument(e)&&(i.relatedTarget=n,Ri.dragenter(e,i)),n&&(i.relatedTarget=e,Ri.dragleave(n,i))),!Ri.dragover(e,i)},ji);function ji(){}var $i,Zi=h.eventSandbox.eventSimulator,Ji=(U(Qi,$i=Vi),Qi.prototype.leaveElement=function(t,e,n,i){Gi.leaveElement(t,e,n,i)},Qi.prototype.enterElement=function(t,e,n,i){Gi.enterElement(t,e,n,i)},Qi.prototype.move=function(t,e){this._needEmulateMoveEvent()&&Gi.move(this.moveEvent,t,e)},Qi.prototype.teardown=function(t,e,n){this._needEmulateMoveEvent()&&g.domUtils.isElementInDocument(t)&&t!==n&&Zi[this.moveEvent](t,e)},Qi.prototype._needEmulateMoveEvent=function(){return"touchmove"!==this.moveEvent||this.holdLeftButton},Qi);function Qi(t){var e=$i.call(this,t)||this;return e.holdLeftButton=t.holdLeftButton,e}var to,eo=(U(no,to=Vi),no.prototype.setup=function(){to.prototype.setup.call(this),this.dragAndDropMode=!0},no.prototype.dragAndDrop=function(t,e,n,i){this.dropAllowed=zi.dragAndDrop(t,e,n,i)},no);function no(){return null!==to&&to.apply(this,arguments)||this}var io,oo=h.eventSandbox.eventSimulator,ro=(U(so,io=Vi),so.prototype.setup=function(){io.prototype.setup.call(this),this.dragAndDropMode=!0},so.prototype.leaveElement=function(t,e,n,i){Gi.leaveElement(t,e,n,i)},so.prototype.move=function(t,e){Gi.move(this.moveEvent,t,e)},so.prototype.enterElement=function(t,e,n,i){Gi.enterElement(t,e,n,i)},so.prototype.dragAndDrop=function(t,e,n,i,o){var r=oo.dragstart(t,i);o.setReadOnlyMode(),r?this.dropAllowed=zi.dragAndDrop(t,e,n,i):this.dragAndDropMode=!1},so.prototype.run=function(t,e,n,i,o){return io.prototype.run.call(this,t,null,n,i,o)},so);function so(){return null!==io&&io.apply(this,arguments)||this}function lo(t,e,n){return new(t?e?eo:ro:Ji)(n)}var ao=null,uo=function(){return ao},co=function(t){ao=t},ho=h.Promise,fo=h.nativeMethods,mo=h.utils.featureDetection,po=h.eventSandbox.eventSimulator,vo=h.eventSandbox.message,go=y.ScrollAutomation,Eo=y.positionUtils,yo=y.domUtils,So=y.styleUtils,bo=y.eventUtils,_o=y.sendRequestToFrame,Po="automation|move|request",Ao="automation|move|response";vo.on(vo.SERVICE_MSG_RECEIVED_EVENT,function(t){t.message.cmd===Po&&(t.source.parent===fu?wo.onMoveToIframeRequest(t):(h.on(h.EVENTS.beforeUnload,function(){return vo.sendServiceMsg({cmd:Ao},t.source)}),wo.onMoveOutRequest(t)))});var wo=(xo.getTarget=function(t,e,n){var i=!Eo.containsOffset(t,e,n),o=i?O(t,e,n):{x:e,y:n};return{element:i?du.documentElement:t,offsetX:o.x,offsetY:o.y}},xo.onMoveToIframeRequest=function(t){var e=new Ti(t.message.endX,t.message.endY),n=t.source,i=yo.findIframeByWindow(n),o=So.getBordersWidth(i),r=So.getElementPadding(i),s=Eo.getIframeClientCoordinates(i),l=Eo.getIframePointRelativeToParentFrame(e,n),a=ki.getPosition(),u=Eo.isInRectangle(a,s)?a:Ni(a,l,s),c={x:u.x-s.left,y:u.y-s.top},h=new xo(i,new pi({modifiers:t.message.modifiers,offsetX:c.x+o.left+r.left,offsetY:c.y+o.top+r.top,speed:t.message.speed,skipScrolling:!0},!1)),f={cmd:Ao,x:c.x,y:c.y};ki.getActiveWindow(fu)!==n?h.run().then(function(){ki.setActiveWindow(n),vo.sendServiceMsg(f,n)}):vo.sendServiceMsg(f,n)},xo.onMoveOutRequest=function(t){var e=t.source,n={left:t.message.left,right:t.message.right,top:t.message.top,bottom:t.message.bottom};if(!t.message.iframeUnderCursor){var i=t.message,o=i.startX,r=i.startY,s=o-n.left,l=r-n.top,a=uo();return a&&(po.mouseout(a,{clientX:s,clientY:l,relatedTarget:null}),po.mouseleave(a,{clientX:s,clientY:l,relatedTarget:null})),void vo.sendServiceMsg({cmd:Ao},e)}var u,c=ki.getPosition(),h=Ni(Ti.create(n).add(c),new Ti(t.message.endX,t.message.endY),n);h?(u=new pi({modifiers:t.message.modifiers,offsetX:h.x-n.left,offsetY:h.y-n.top,speed:t.message.speed,skipScrolling:!0},!1),new xo(du.documentElement,u).run().then(function(){var t={cmd:Ao,x:h.x,y:h.y};ki.setActiveWindow(e),vo.sendServiceMsg(t,e)})):vo.sendServiceMsg({cmd:Ao,x:n.left,y:n.top},e)},xo.prototype._getCursorSpeed=function(){return this.automationSettings.cursorSpeed},xo.prototype._getTargetClientPoint=function(){var t=So.getElementScroll(this.element);if(yo.isHtmlElement(this.element))return{x:Math.floor(this.offsetX-t.left),y:Math.floor(this.offsetY-t.top)};var e=Eo.getClientPosition(this.element),n=this.element.tagName&&yo.isBodyElement(this.element);return{x:Math.floor(n?e.x+this.offsetX:e.x+this.offsetX-t.left),y:Math.floor(n?e.y+this.offsetY:e.y+this.offsetY-t.top)}},xo.prototype._getEventSequenceOptions=function(t){var e=bo.BUTTONS_PARAMETER.noButton,n=B(t);return{eventOptions:{clientX:t.x,clientY:t.y,screenX:n.x,screenY:n.y,buttons:e,ctrl:this.modifiers.ctrl,alt:this.modifiers.alt,shift:this.modifiers.shift,meta:this.modifiers.meta},eventSequenceOptions:{moveEvent:this.moveEvent}}},xo.prototype._runEventSequence=function(t,e){var n=e.eventOptions,i=e.eventSequenceOptions;lo(!1,this.firstMovingStepOccured,i).run(t,uo(),n,null,null)},xo.prototype._emulateEvents=function(t,e){this._runEventSequence(t,this._getEventSequenceOptions(e)),this.firstMovingStepOccured=!0,co(t)},xo.prototype._movingStep=function(n){var i=this;return ki.move(n).then(function(){return H(ki.getPosition())}).then(function(t){var e=i._getCorrectedTopElement(t);return e?i._emulateEvents(e,n):null}).then(Ki)},xo.prototype._getCorrectedTopElement=function(t){return t},xo.prototype._move=function(e){var n=this,i=ki.getPosition(),o=Ti.create(e).sub(i),r=fo.dateNow(),s=Math.max(Math.max(Math.abs(o.x),Math.abs(o.y))/this.cursorSpeed,this.minMovingTime),l=Ti.create(i),a=!0;return function(e,n){return D(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return e()?[4,n()]:[3,2];case 1:return t.sent(),[3,0];case 2:return[2]}})})}(function(){return!l.eql(e)},function(){var t;return n._needMoveCursorImmediately()?l=Ti.create(e):a?(a=!1,l.add({x:0<o.x?1:-1,y:0<o.y?1:-1})):(t=Math.min((fo.dateNow()-r)/s,1),l=Ti.create(o).mul(t).add(i).round(Math.floor)),n._movingStep(l)})},xo.prototype._needMoveCursorImmediately=function(){return this.touchMode},xo.prototype._scroll=function(){if(this.skipScrolling)return ho.resolve();var t=new ri({offsetX:this.offsetX,offsetY:this.offsetY},!1);return new go(this.element,t).run()},xo.prototype._moveToCurrentFrame=function(t){if(ki.isActive(fu))return ho.resolve();var e,n=ki.getPosition(),i=n.x,o=n.y,r=ki.getActiveWindow(fu),s=null,l=null,a={cmd:Po,startX:i,startY:o,endX:t.x,endY:t.y,modifiers:this.modifiers,speed:this.speed};return r.parent===fu&&(s=yo.findIframeByWindow(r),e=Eo.getIframeClientCoordinates(s),a.left=e.left,a.top=e.top,a.right=e.right,a.bottom=e.bottom),H(ki.getPosition()).then(function(t){return l=t===s,r.parent===fu&&(a.iframeUnderCursor=l),_o(a,Ao,r)}).then(function(t){return ki.setActiveWindow(fu),l||N(fu)?ki.move(t):null})},xo.prototype.run=function(){var o=this;return this._scroll().then(function(){var t=o._getTargetClientPoint(),e=So.getWindowDimensions(fu),n=e.width,i=e.height;return 0<=t.x&&t.x<=n&&0<=t.y&&t.y<=i?o._moveToCurrentFrame(t).then(function(){return o._move(t)}):null})},xo);function xo(t,e){this.touchMode=mo.isTouchDevice,this.moveEvent=this.touchMode?"touchmove":"mousemove",this.automationSettings=new q(e.speed);var n=xo.getTarget(t,e.offsetX,e.offsetY);this.element=n.element,this.offsetX=n.offsetX,this.offsetY=n.offsetY,this.speed=e.speed,this.cursorSpeed=this._getCursorSpeed(),this.minMovingTime=e.minMovingTime||0,this.modifiers=e.modifiers||{},this.skipScrolling=e.skipScrolling,this.skipDefaultDragBehavior=e.skipDefaultDragBehavior,this.firstMovingStepOccured=!1}var Co,To=h.utils.extend,Mo=function(t){var e=t.element,n=void 0===e?null:e,i=t.clientPoint,o=void 0===i?null:i,r=t.screenPoint,s=void 0===r?null:r,l=t.isTarget,a=void 0!==l&&l,u=t.inMoving,c=void 0!==u&&u;this.element=n,this.clientPoint=o,this.screenPoint=s,this.isTarget=a,this.inMoving=c,this.devicePoint=B(o)},Uo=(U(Do,Co=g.serviceUtils.EventEmitter),Do.prototype._getElementForEvent=function(t){var e=g.positionUtils.containsOffset(this.element,this.options.offsetX,this.options.offsetY)?this.element:null;return H(t.point,e)},Do.prototype._moveToElement=function(){var t=this,e=new pi(To({skipScrolling:!0},this.options),!1);return new wo(this.element,e).run().then(function(){return g.delay(t.automationSettings.mouseActionStepDelay)})},Do.prototype._scrollToElement=function(){var s=this,t=new ri(this.options),e=new g.ScrollAutomation(this.element,t),l=!1;return e.run().then(function(t){return l=t,g.delay(s.automationSettings.mouseActionStepDelay)}).then(function(){return H(ki.getPosition())}).then(function(t){if(!t||!g.domUtils.contains(s.element,t)||!l)return null;var e=uo(),n=g.domUtils.getCommonAncestor(t,e),i=g.positionUtils.getClientPosition(t),o=B({x:i.x,y:i.y}),r={clientX:i.x,clientY:i.y,screenX:o.x,screenY:o.y,ctrl:!1,alt:!1,shift:!1,meta:!1,buttons:g.eventUtils.BUTTONS_PARAMETER.leftButton};return Gi.leaveElement(t,e,n,r),Gi.enterElement(t,e,n,r),co(t),l})},Do.prototype._getElementOffset=function(){var t=r(this.element),e=this.options,n=e.offsetX,i=e.offsetY;return{offsetX:n=n||0===n?n:t.offsetX,offsetY:i=i||0===i?i:t.offsetY}},Do.prototype._wrapAction=function(t){var a=this,e=this._getElementOffset(),i=e.offsetX,u=e.offsetY,c=O(this.element,i,u),h=g.positionUtils.getClientPosition(this.element);return t().then(function(){var t,e,n,o=O(a.element,i,u),r=g.positionUtils.getClientPosition(a.element),s=(t=a.element,e=o,n=g.styleUtils.getElementScroll(t),!/html/i.test(t.tagName)&&g.styleUtils.hasScroll(t)&&(e.x-=n.left,e.y-=n.top),g.positionUtils.offsetToClientCoords(e)),l=g.positionUtils.containsOffset(a.element,i,u)?a.element:null;return H(s,l).then(function(t){if(!t)return new Mo({});var e=(e=!l||t===l||t===a.element)||-1<g.arrayUtils.indexOf(g.domUtils.getParents(t),a.element),n=c.x!==o.x||c.y!==o.y,i=h.x!==r.x||h.y!==r.y;return new Mo({element:t,clientPoint:s,screenPoint:o,isTarget:e,inMoving:n&&i})})})},Do._checkElementState=function(t,e){if(!t.element)throw new Error(G.elementIsInvisibleError);if(e&&(!t.isTarget||t.inMoving))throw new Error(G.foundElementIsNotTarget);return t},Do.prototype._ensureElement=function(e,n,i){var o=this;return this._wrapAction(function(){return o._scrollToElement()}).then(function(t){return Do._checkElementState(t,e)}).then(function(t){return i?t:o._wrapAction(function(){return o._moveToElement()})}).then(function(t){return n||Do._checkElementState(t,e),t}).then(function(t){return o.emit(o.TARGET_ELEMENT_FOUND_EVENT,{element:t.element}),{element:t.element,clientPoint:t.clientPoint,screenPoint:t.screenPoint,devicePoint:t.devicePoint}})},Do);function Do(t,e){var n=Co.call(this)||this;return n.TARGET_ELEMENT_FOUND_EVENT="automation|target-element-found-event",n.element=t,n.options=e,n.automationSettings=new q(e.speed),n}var Io,ko=h.Promise,Oo=(U(Bo,Io=Uo),Bo.prototype.run=function(t){var e=this,n=ko.resolve();return this.element!==du.scrollingElement&&this.element!==du.documentElement&&(n=this._ensureElement(t,!0,!0)),n.then(function(){e.element.scrollLeft=e.scrollLeft,e.element.scrollTop=e.scrollTop})},Bo);function Bo(t,e,n){var i,o,r,s,l,a=e.x,u=e.y,c=e.position,h=e.byX,f=e.byY,d=Io.call(this,t,n)||this;return c&&(o=t,r=c,s=Math.floor(o.scrollWidth/2-o.clientWidth/2),l=Math.floor(o.scrollHeight/2-o.clientHeight/2),a=(i={top:[s,0],right:[o.scrollWidth,l],bottom:[s,o.scrollHeight],left:[0,l],topRight:[o.scrollWidth,0],topLeft:[0,0],bottomRight:[o.scrollWidth,o.scrollHeight],bottomLeft:[0,o.scrollHeight],center:[s,l]}[r])[0],u=i[1]),d.scrollLeft="number"==typeof a?a:t.scrollLeft,d.scrollTop="number"==typeof u?u:t.scrollTop,h&&(d.scrollLeft+=h),f&&(d.scrollTop+=f),d}var No,Fo=(U(Yo,No=Uo),Yo.prototype.run=function(t){return this._ensureElement(t,!0,!0)},Yo);function Yo(t,e){return No.call(this,t,e)||this}var Ko=h.Promise,Lo=h.eventSandbox.message;function Vo(t,i,e){return new Ko(function(n){Lo.on(Lo.SERVICE_MSG_RECEIVED_EVENT,function t(e){e.message.cmd===i&&(Lo.off(Lo.SERVICE_MSG_RECEIVED_EVENT,t),n(e.message))}),Lo.sendServiceMsg(t,e)})}var Xo=h.Promise,Ro=h.nativeMethods,Wo=h.utils.browser,Ho=h.eventSandbox.focusBlur,Go=y.contentEditable,qo=y.textSelection,zo=y.domUtils,jo=y.styleUtils,$o=h.eventSandbox.message,Zo="automation|iframe|request",Jo="automation|iframe|response";function Qo(v,g,E){var t=this;return new Xo(function(p){return D(t,void 0,void 0,function(){var s,n,i,o,r,l,a,u,c,h,f,d,m;return I(this,function(t){switch(t.label){case 0:return N(fu)?[4,Vo({cmd:Zo},Jo,fu.parent)]:[3,2];case 1:t.sent(),t.label=2;case 2:if(s=zo.getActiveElement(),n=zo.isTextEditableElement(v),i=zo.closest(v,"label[for]"),o=zo.isElementFocusable(v),r=!o&&i,l=zo.isContentEditableElement(v),a=l?Go.findContentEditableParent(v):v,g&&Wo.isWebKit&&n&&qo.select(v,0,0),r)return g&&(e=i,zo.isElementFocusable(e)?Ho.focus(e,y.noop,!1,!0):er(e)),p(),[2];if(u=!g,c=!1,!o&&!l){if(h=zo.findDocument(a),f=Ro.documentActiveElementGetter.call(h),d=zo.isBodyElement(f),m=zo.isBodyElement(a)?a:zo.getFocusableParent(a),f&&!d&&zo.containsElement(f,a)||d&&zo.isBodyElement(m))return p(),[2];a=m||h.body,c=!0}return Ho.focus(a,function(){var t,e,n,i,o,r;!g||l||v===zo.getActiveElement()?(t=v,e=E,o=zo.isTextEditableElement(t),r=zo.isContentEditableElement(t),o||r?r&&isNaN(parseInt(e,10))?qo.setCursorToLastVisiblePosition(t):(n=isNaN(parseInt(e,10))?zo.getElementValue(t).length:e,qo.select(t,n,n)):(i=Go.findContentEditableParent(t))&&qo.setCursorToLastVisiblePosition(Go.findContentEditableParent(i)),g||zo.getActiveElement()===s?p():Ho.focus(s,p,!0,!0)):p()},u,!0,!1,c),[2]}var e})})})}function tr(t){var e=zo.closest(t,"label[for]"),n=e&&(e.control||du.getElementById(e.htmlFor));return n&&jo.isElementVisible(n)?n:null}function er(t){var e=tr(t);e&&zo.getActiveElement()!==e&&Ho.focus(e,y.noop,!1,!0)}$o.on($o.SERVICE_MSG_RECEIVED_EVENT,function(t){var e;t.message.cmd===Zo&&(e=zo.findIframeByWindow(t.source),Ho.focus(e,function(){$o.sendServiceMsg({cmd:Jo},t.source)},!1))});var nr=h.utils.browser,ir=h.eventSandbox.eventSimulator,or=h.eventSandbox.listeners,rr=h.nativeMethods,sr=y.domUtils,lr=y.styleUtils,ar=i.selectElement,ur=(cr.prototype.run=function(){this.eventState.clickElement&&ir.click(this.eventState.clickElement,this.eventArgs.options),sr.isElementFocusable(this.eventArgs.element)||er(this.eventArgs.element)},cr);function cr(t,e){this.eventState=t,this.eventArgs=e}var hr,fr=(U(dr,hr=ur),dr.prototype.run=function(){function t(t){n=rr.eventTargetGetter.call(t)===e.input}var e=this,n=!1;or.addInternalEventBeforeListener(fu,["focus"],t),hr.prototype.run.call(this),or.removeInternalEventBeforeListener(fu,["focus"],t),sr.isElementFocusable(this.label)&&!n&&this._ensureBoundElementFocusRaised()},dr.prototype._ensureBoundElementFocusRaised=function(){ir.focus(this.input)},dr);function dr(t,e){var n=hr.call(this,t,e)||this;return n.label=n.eventArgs.element,n.input=tr(n.eventArgs.element),n}var mr,pr=(U(vr,mr=ur),vr.prototype.run=function(){mr.prototype.run.call(this),this._toggleSelectOptionList()},vr.prototype._toggleSelectOptionList=function(){var t=this.eventArgs.element;1===lr.getSelectElementSize(t)&&!1!==this.eventState.simulateDefaultBehavior&&(ar.isOptionListExpanded(t)?ar.collapseOptionList():ar.expandOptionList(t))},vr);function vr(t,e){return mr.call(this,t,e)||this}var gr,Er=(U(yr,gr=ur),yr.prototype.run=function(){return this.eventArgs.element},yr);function yr(t,e){return gr.call(this,t,e)||this}var Sr,br=(U(_r,Sr=fr),_r.prototype.run=function(){function t(){e=!0}var e=!1;or.addInternalEventBeforeListener(fu,["change"],t),Sr.prototype.run.call(this),or.removeInternalEventBeforeListener(fu,["change"],t),nr.isChrome&&!e&&this._ensureCheckboxStateChanged()},_r.prototype._ensureCheckboxStateChanged=function(){this.checkbox.checked=!this.checkbox.checked,ir.change(this.checkbox)},_r);function _r(t,e){var n=Sr.call(this,t,e)||this;return n.checkbox=n.input,n}var Pr,Ar=h.Promise,wr=h.utils.extend,xr=h.utils.browser,Cr=h.utils.featureDetection,Tr=h.eventSandbox.eventSimulator,Mr=h.eventSandbox.listeners,Ur=y.domUtils,Dr=y.eventUtils,Ir=y.arrayUtils,kr=y.delay,Or=(U(Br,Pr=Uo),Br.prototype._bindMousedownHandler=function(){var e=this,n=function(t){e.eventState.mousedownPrevented=t.defaultPrevented,Dr.preventDefault(t),Dr.unbind(e.element,"mousedown",n)};Dr.bind(this.element,"mousedown",n)},Br.prototype._bindBlurHandler=function(t){var e=this,n=function(){e.eventState.blurRaised=!0,Dr.unbind(t,"blur",n,!0)};Dr.bind(t,"blur",n,!0)},Br.prototype._isTouchEventWasCancelled=function(){return this.eventState.touchStartCancelled||this.eventState.touchEndCancelled},Br.prototype._raiseTouchEvents=function(t){Cr.isTouchDevice&&(this.eventState.touchStartCancelled=!Tr.touchstart(t.element,t.options),this.eventState.touchEndCancelled=!Tr.touchend(t.element,t.options))},Br.prototype._mousedown=function(n){var i=this;return this.targetElementParentNodes=Ur.getParents(n.element),this.mouseDownElement=n.element,ki.leftButtonDown().then(function(){i._raiseTouchEvents(n);var t=Ur.getActiveElement();i.activeElementBeforeMouseDown=t;var e=(xr.isWebKit||xr.isIE)&&Ur.isSelectElement(i.mouseDownElement);return e&&i._bindMousedownHandler(),i._bindBlurHandler(t),i._isTouchEventWasCancelled()||(i.eventState.simulateDefaultBehavior=Tr.mousedown(n.element,n.options)),!1===i.eventState.simulateDefaultBehavior&&(i.eventState.simulateDefaultBehavior=e&&!i.eventState.mousedownPrevented),i._ensureActiveElementBlur(t)}).then(function(){return i._focus(n)})},Br.prototype._ensureActiveElementBlur=function(e){var n=this;return new Ar(function(t){Ur.getActiveElement()===e||n.eventState.blurRaised?t():xr.isIE&&xr.version<12?Ki().then(function(){n.eventState.blurRaised||Tr.blur(e),t()}):(Tr.blur(e),t())})},Br.prototype._focus=function(t){return!1===this.eventState.simulateDefaultBehavior?Ar.resolve():Qo(Ur.isContentEditableElement(this.element)?this.element:t.element,!xr.isIE||this.activeElementBeforeMouseDown===Ur.getActiveElement(),this.caretPos)},Br._getElementForClick=function(t,e,n){var i=Ur.getParents(e),o=Ur.isTheSameNode(e,t);return xr.isFirefox?o?t:null:o?Ir.equals(n,i)?t:null:t.contains(e)&&!Ur.isEditableFormElement(e)?t:e.contains(t)?e:Ir.getCommonElement(i,n)},Br.prototype._mouseup=function(i){var o=this;return ki.buttonUp().then(function(){return o._getElementForEvent(i)}).then(function(t){i.element=t,o.eventState.clickElement=Br._getElementForClick(o.mouseDownElement,t,o.targetElementParentNodes);var e={},n=function(t){e=t.timeStamp,Mr.removeInternalEventBeforeListener(fu,["mouseup"],n)};return xr.isIE||Mr.addInternalEventBeforeListener(fu,["mouseup"],n),o._isTouchEventWasCancelled()||Tr.mouseup(t,i.options),{timeStamp:e}})},Br.prototype._click=function(t){var e,n,i,o,r,s,l,a=(e=this.eventState,i=tr((n=t).element),o=sr.isSelectElement(n.element),r=sr.isOptionElement(n.element),s=sr.isLabelElement(n.element)&&i,l=i&&sr.isCheckboxElement(i),new(o?pr:r?Er:l?br:s?fr:ur)(e,n));return this._isTouchEventWasCancelled()||a.run(),t},Br.prototype.run=function(t){var r=this,s=null;return this._ensureElement(t).then(function(t){var e=t.element,n=t.clientPoint,i=t.screenPoint,o=t.devicePoint;return s={point:n,screenPoint:i,element:e,options:wr({clientX:n.x,clientY:n.y,screenX:o.x,screenY:o.y},r.modifiers)},Ar.all([kr(r.automationSettings.mouseActionStepDelay),r._mousedown(s)])}).then(function(){return r._mouseup(s)}).then(function(t){var e=t.timeStamp;return s.options.timeStamp=e,r._click(s)})},Br);function Br(t,e){var n=Pr.call(this,t,e)||this;return n.modifiers=e.modifiers,n.caretPos=e.caretPos,n.targetElementParentNodes=[],n.activeElementBeforeMouseDown=null,n.mouseDownElement=null,n.eventState={mousedownPrevented:!1,blurRaised:!1,simulateDefaultBehavior:!0,clickElement:null,touchStartCancelled:!1,touchEndCancelled:!1},n}var Nr=h.Promise,Fr=h.utils.browser,Yr=h.utils.featureDetection,Kr=h.eventSandbox.eventSimulator,Lr=h.eventSandbox.focusBlur,Vr=h.nativeMethods,Xr=y.domUtils,Rr=y.styleUtils,Wr=y.delay,Hr=i.selectElement,Gr=Yr.isTouchDevice?0:160,qr=(zr.prototype._calculateEventArguments=function(){var t=this.optionListExpanded?Hr.getEmulatedChildElement(this.element):this.element,e=1<Rr.getSelectElementSize(this.parentSelect);return{options:this.modifiers,element:Fr.isIE&&e?this.parentSelect:t}},zr.prototype._getMoveArguments=function(){var t,e,n=null,i=null,o=null;return o=this.optionListExpanded?(i=(t=c(n=Hr.getEmulatedChildElement(this.element))).offsetX,t.offsetY):(n=du.documentElement,i=(e=Hr.getSelectChildCenter(this.element)).x,e.y),{element:n,offsetX:i,offsetY:o,speed:this.speed}},zr.prototype._move=function(t){var e=this,n=t.element,i=t.offsetX,o=t.offsetY,r=t.speed,s=new pi({offsetX:i,offsetY:o,speed:r,modifiers:this.modifiers},!1);return new wo(n,s).run().then(function(){return Wr(e.automationSettings.mouseActionStepDelay)})},zr.prototype._mousedown=function(){var t=this;return Fr.isFirefox?(Kr.mousedown(this.eventsArgs.element,this.eventsArgs.options),this.clickCausesChange&&(this.parentSelect.selectedIndex=this.childIndex),this._focus()):Fr.isIE?(Kr.mousedown(this.eventsArgs.element,this.eventsArgs.options),this._focus()):this._focus().then(function(){return Wr(Gr)}).then(function(){Kr.mousedown(t.eventsArgs.element,t.eventsArgs.options),t.clickCausesChange&&(t.parentSelect.selectedIndex=t.childIndex)})},zr.prototype._focus=function(){var e=this;return new Nr(function(t){Lr.focus(e.parentSelect,t,!1,!0)})},zr.prototype._mouseup=function(){var t=Fr.isIE?this.parentSelect:this.eventsArgs.element;Kr.mouseup(t,this.eventsArgs.options),Fr.isIE&&this.clickCausesChange&&(this.parentSelect.selectedIndex=this.childIndex);var e=Fr.isFirefox||Fr.isSafari||Fr.isChrome&&53<=Fr.version,n=e||Fr.isIE;return e&&this.clickCausesChange&&Kr.input(this.parentSelect),n&&this.clickCausesChange&&Kr.change(this.parentSelect),Nr.resolve()},zr.prototype._click=function(){Kr.click(this.eventsArgs.element,this.eventsArgs.options)},zr.prototype.run=function(){var t=this;if(!this.parentSelect)return Kr.click(this.eventsArgs.element,this.eventsArgs.options),Nr.resolve();this.optionListExpanded||Hr.scrollOptionListByChild(this.element);var e=this._getMoveArguments();return this.eventsArgs=this._calculateEventArguments(),Rr.getSelectElementSize(this.parentSelect)<=1?this._move(e).then(function(){return t._click()}):this._move(e).then(function(){return t._mousedown()}).then(function(){return t._mouseup()}).then(function(){return t._click()})},zr);function zr(t,e){var n,i,o,r,s;this.element=t,this.modifiers=e.modifiers,this.caretPos=e.caretPos,this.offsetX=e.offsetX,this.offsetY=e.offsetY,this.speed=e.speed,this.automationSettings=new q(e.speed),this.parentSelect=Xr.getSelectParent(this.element),this.optionListExpanded=!!this.parentSelect&&Hr.isOptionListExpanded(this.parentSelect),this.childIndex=null,this.clickCausesChange=!1,this.parentSelect&&(n=Xr.isOptionElement(this.element),i=this.parentSelect.selectedIndex,this.childIndex=Xr.getElementIndexInParent(this.parentSelect,this.element),o=Vr.nodeParentNodeGetter.call(this.element),r=Xr.isOptionGroupElement(o)?o:null,s=this.element.disabled||r&&r.disabled,this.clickCausesChange=n&&!s&&this.childIndex!==i),this.eventsArgs={options:this.modifiers,element:this.element}}var jr,$r=h.utils.featureDetection,Zr=h.utils.browser,Jr=h.eventSandbox.eventSimulator,Qr=y.eventUtils,ts=y.delay,es=$r.isTouchDevice?0:160,ns=(U(is,jr=Uo),is.prototype._firstClick=function(t){var e=this,n=new fi(this.options);n.speed=1;var i=new Or(this.element,n);return i.on(i.TARGET_ELEMENT_FOUND_EVENT,function(t){return e.emit(e.TARGET_ELEMENT_FOUND_EVENT,t)}),i.run(t).then(function(t){return ts(es).then(function(){return t})})},is.prototype._secondClick=function(t){var e=this;Zr.isIE&&Qr.bind(du,"focus",Qr.preventDefault,!0);var n=new fi({offsetX:t.screenPoint.x,offsetY:t.screenPoint.y,caretPos:this.caretPos,modifiers:this.modifiers,speed:1}),i=new Or(du.documentElement,n);return i.run().then(function(t){return e.eventState.dblClickElement=i.eventState.clickElement,Zr.isIE&&Qr.unbind(du,"focus",Qr.preventDefault,!0),t})},is.prototype._dblClick=function(t){this.eventState.dblClickElement&&Jr.dblclick(this.eventState.dblClickElement,t.options)},is.prototype.run=function(t){var e=this;return this._firstClick(t).then(function(t){return e._secondClick(t)}).then(function(t){return e._dblClick(t)})},is);function is(t,e){var n=jr.call(this,t,e)||this;return n.modifiers=e.modifiers,n.caretPos=e.caretPos,n.speed=e.speed,n.automationSettings=new q(n.speed),n.offsetX=e.offsetX,n.offsetY=e.offsetY,n.eventArgs=null,n.eventState={dblClickElement:null},n}var os,rs=function(){this.enabled=!1,this.dropAllowed=!1,this.element=null,this.dataTransfer=null,this.dataStore=null},ss=h.nativeMethods,ls=h.utils.featureDetection,as=h.utils.html,us=h.utils.url,cs=h.eventSandbox.DataTransfer,hs=h.eventSandbox.DragDataStore,fs=y.eventUtils,ds=y.domUtils,ms=(U(ps,os=wo),ps.prototype._getCursorSpeed=function(){return this.automationSettings.draggingSpeed},ps.prototype._getEventSequenceOptions=function(t){var e=os.prototype._getEventSequenceOptions.call(this,t),n=e.eventOptions,i=e.eventSequenceOptions;return n.dataTransfer=this.dragAndDropState.dataTransfer,n.buttons=fs.BUTTONS_PARAMETER.leftButton,i.holdLeftButton=!0,{eventOptions:n,eventSequenceOptions:i}},ps.prototype._getCorrectedTopElement=function(t){return this.touchMode?this.dragElement:t},ps.prototype._runEventSequence=function(t,e){var n=e.eventOptions,i=e.eventSequenceOptions,o=lo(this.dragAndDropState.enabled,this.firstMovingStepOccured,i).run(t,uo(),n,this.dragElement,this.dragAndDropState.dataStore),r=o.dragAndDropMode,s=o.dropAllowed;this.dragAndDropState.enabled=r,this.dragAndDropState.dropAllowed=s},ps.prototype._needMoveCursorImmediately=function(){return!1},ps.prototype.run=function(){var l=this;return H(ki.getPosition()).then(function(t){l.dragElement=t;var e,n,i,o,r,s=function(t){for(var e=t;e;){if(e.draggable)return e;e=ss.nodeParentNodeGetter.call(e)}return null}(l.dragElement);return s&&ls.hasDataTransfer&&!l.skipDefaultDragBehavior&&(l.dragAndDropState.enabled=!0,l.dragElement=s,l.dragAndDropState.element=l.dragElement,l.dragAndDropState.dataStore=new hs,l.dragAndDropState.dataTransfer=new cs(l.dragAndDropState.dataStore),((e=ds.isAnchorElement(l.dragElement))||ds.isImgElement(l.dragElement))&&(n=e?"href":"src",o=(i=us.parseProxyUrl(l.dragElement[n]))?i.destUrl:l.dragElement[n],r=as.cleanUpHtml(ss.elementOuterHTMLGetter.call(l.dragElement)),l.dragAndDropState.dataTransfer.setData("text/plain",o),l.dragAndDropState.dataTransfer.setData("text/uri-list",o),l.dragAndDropState.dataTransfer.setData("text/html",r))),os.prototype.run.call(l).then(function(){return l.dragAndDropState})})},ps);function ps(t,e){var n=os.call(this,t,e)||this;return n.dragElement=null,n.dragAndDropState=new rs,n}var vs,gs=h.Promise,Es=h.utils.extend,ys=h.utils.featureDetection,Ss=h.eventSandbox.eventSimulator,bs=h.eventSandbox.focusBlur,_s=(U(Ps,vs=Uo),Ps.prototype._getEndPoint=function(){throw new Error("Not implemented")},Ps.prototype._mousedown=function(t){var e=this;return ki.leftButtonDown().then(function(){return e.simulateDefaultBehavior=Ss[e.downEvent](t.element,t.options),e._focus(t)})},Ps.prototype._focus=function(n){var i=this;return new gs(function(t){var e=g.domUtils.isContentEditableElement(i.element)?g.contentEditable.findContentEditableParent(i.element):n.element;bs.focus(e,t,!1,!0)})},Ps.prototype._getDestination=function(){throw new Error("Not implemented")},Ps.prototype._drag=function(){var e=this,t=this._getDestination(),n=t.element,i=t.offsets,o=t.endPoint;this.endPoint=o;var r=new pi({offsetX:i.offsetX,offsetY:i.offsetY,modifiers:this.modifiers,speed:this.speed,minMovingTime:25,skipDefaultDragBehavior:!1===this.simulateDefaultBehavior},!1);return new ms(n,r).run().then(function(t){return e.dragAndDropState=t,g.delay(e.automationSettings.mouseActionStepDelay)})},Ps.prototype._mouseup=function(){var o=this;return ki.buttonUp().then(function(){var e=g.positionUtils.offsetToClientCoords(o.endPoint),n=null,i=Es({clientX:e.x,clientY:e.y},o.modifiers);return H(e).then(function(t){return(n=t)?(o.dragAndDropState.enabled?(i.dataTransfer=o.dragAndDropState.dataTransfer,o.dragAndDropState.dropAllowed&&Ss.drop(n,i),Ss.dragend(o.dragAndDropState.element,i),o.dragAndDropState.dataStore.setProtectedMode()):Ss[o.upEvent](n,i),H(e)):n}).then(function(t){n&&t===n&&!o.dragAndDropState.enabled&&Ss.click(n,i)})})},Ps.prototype.run=function(t){var i,o=this;return this._ensureElement(t).then(function(t){var e=t.element,n=t.clientPoint;return i={point:n,element:e,options:Es({clientX:n.x,clientY:n.y},o.modifiers)},gs.all([g.delay(o.automationSettings.mouseActionStepDelay),o._mousedown(i)])}).then(function(){return o._drag()}).then(function(){return o._mouseup()})},Ps);function Ps(t,e){var n=vs.call(this,t,e)||this;return n.modifiers=e.modifiers,n.speed=e.speed,n.offsetX=e.offsetX,n.offsetY=e.offsetY,n.endPoint=null,n.simulateDefaultBehavior=!0,n.downEvent=ys.isTouchDevice?"touchstart":"mousedown",n.upEvent=ys.isTouchDevice?"touchend":"mouseup",n.dragAndDropState=null,n}var As,ws=y.styleUtils,xs=(U(Cs,As=_s),Cs.prototype._getDestination=function(){var t=O(this.element,this.offsetX,this.offsetY),e=ws.getWidth(du),n=ws.getHeight(du),i={x:t.x+this.dragOffsetX,y:t.y+this.dragOffsetY},i={x:Math.min(Math.max(0,i.x),e),y:Math.min(Math.max(0,i.y),n)};return{element:du.documentElement,offsets:{offsetX:i.x,offsetY:i.y},endPoint:i}},Cs);function Cs(t,e,n,i){var o=As.call(this,t,i)||this;return o.dragOffsetX=e,o.dragOffsetY=n,o}var Ts,Ms=y.positionUtils,Us=(U(Ds,Ts=_s),Ds.prototype._getDestination=function(){var t=this.destinationElement,e=Ms.getElementRectangle(t),n=r(t,this.destinationOffsetX,this.destinationOffsetY);return{element:t,offsets:n,endPoint:{x:e.left+n.offsetX,y:e.top+n.offsetY}}},Ds);function Ds(t,e,n){var i=Ts.call(this,t,n)||this;return i.destinationElement=e,i.destinationOffsetX=n.destinationOffsetX,i.destinationOffsetY=n.destinationOffsetY,i}var Is,ks=(U(Os,Is=Uo),Os.prototype.run=function(t){return this._ensureElement(t,!0)},Os);function Os(t,e){return Is.call(this,t,e)||this}var Bs=h.utils.browser,Ns=h.sandbox.event,Fs=h.eventSandbox.eventSimulator,Ys=h.eventSandbox.listeners,Ks=h.nativeMethods,Ls=y.domUtils,Vs=y.contentEditable,Xs=y.textSelection,Rs=/ /g;function Ws(t){var e=Xs.getSelectionByElement(t),n=Xs.hasInverseSelectionContentEditable(t);return Xs.hasElementContainsSelection(t)?Vs.getSelection(t,e,n):{startPos:Vs.calculateNodeAndOffsetByPosition(t,0),endPos:Vs.calculateNodeAndOffsetByPosition(t,0)}}function Hs(t){var e=t.startPos.node,n=t.startPos.offset,i=t.endPos.offset,o=Vs.getFirstNonWhitespaceSymbolIndex(e.nodeValue),r=Vs.getLastNonWhitespaceSymbolIndex(e.nodeValue);return n<o&&0!==n?(t.startPos.offset=o,t.endPos.offset=i+o-n):r<i&&i!==e.nodeValue.length&&(t.startPos.offset=e.nodeValue.length,t.endPos.offset=i+e.nodeValue.length-n),t}function Gs(t,e,n){return!n||Fs.beforeInput(t,e)}function qs(t,e){var n;function i(t){t.preventDefault(),n=!0}function o(t){"textInput"===t.type&&(n=!1)}Bs.isSafari&&(Ys.addInternalEventBeforeListener(fu,["textInput"],i),Ns.on(Ns.EVENT_PREVENTED_EVENT,o));var r=Bs.isFirefox||Fs.textInput(t,e)||n;return Bs.isSafari&&(Ys.removeInternalEventBeforeListener(fu,["textInput"],i),Ns.off(Ns.EVENT_PREVENTED_EVENT,o)),r||Bs.isIE11}function zs(t,e){var n,i,o,r,s,l,a,u,c,h,f,d=Ws(t),m=d.startPos.node,p=d.endPos.node,v=!0,g=!0,E=e;function y(){g=!1}function S(t,e,n){n()}e=e.replace(Rs,String.fromCharCode(160)),m&&p&&Ls.isContentEditableElement(m)&&Ls.isContentEditableElement(p)&&(Ls.isTheSameNode(m,p)||(Xs.deleteSelectionContents(t),n=t,o=(i=d).startPos.node,r=Ks.nodeParentNodeGetter.call(o)&&o.parentElement,!(Bs.isChrome&&Bs.version<58||Bs.isSafari)&&r&&Ls.isElementContainsNode(n,o)||(i=Ws(n),Xs.hasInverseSelectionContentEditable(n)&&(i={startPos:i.endPos,endPos:i.startPos})),i.endPos.offset=i.startPos.offset,m=(d=i).startPos.node),m&&Ls.isContentEditableElement(m)&&Ls.isRenderedNode(m)&&Gs(t,e,Bs.isChrome||Bs.isFirefox)&&(v=qs(t,E),g=v&&!Bs.isIE11,Ys.addInternalEventBeforeListener(fu,["input"],y),Ys.addInternalEventBeforeListener(fu,["textinput"],S),(v=v&&Gs(t,e,Bs.isSafari))&&(Ls.isElementNode(m)?(s=m,l=e,c=du.createTextNode(l),h={node:c,offset:l.length},f=Ks.nodeParentNodeGetter.call(s),"br"===Ls.getTagName(s)?f.insertBefore(c,s):0<a?(u=Ks.nodeChildNodesGetter.call(s),s.insertBefore(c,u[a])):s.appendChild(c),Xs.selectByNodesAndOffsets(h,h)):function(t,e,n){var i=e.startPos.node;Ls.isElementContainsNode(t,i)||(i=(e=Hs(Ws(t))).startPos.node);var o=e.startPos.offset,r=e.endPos.offset,s=i.nodeValue,l={node:i,offset:o+n.length};i.nodeValue=s.substring(0,o)+n+s.substring(r,s.length),Xs.selectByNodesAndOffsets(l,l)}(t,Hs(d),e)),Ki().then(function(){g&&Fs.input(t,e),Ys.removeInternalEventBeforeListener(fu,["input"],y),Ys.removeInternalEventBeforeListener(fu,["textinput"],S)})))}function js(t,e,n){var i,o,r,s,l,a,u,c,h,f,d,m,p;Ls.isContentEditableElement(t)&&zs(t,e),Ls.isElementReadOnly(t)||(Ls.isTextEditableElement(t)?(l=t,a=e,h=Ls.getElementValue(l),f=a.length,d=Xs.getSelectionStart(l),m=Xs.getSelectionEnd(l),p=Ls.isInputElement(l)&&"number"===l.type,Gs(l,a,Bs.isChrome||Bs.isFirefox)&&qs(l,a)&&Gs(l,a,Bs.isSafari)&&((u=!Bs.isIE&&p?null:parseInt(l.maxLength,10))<0&&(u=Bs.isIE&&Bs.version<17?0:null),c=h.substring(0,d)+a+h.substring(m,h.length),(null===u||isNaN(u)||c.length<=u)&&(p&&Bs.isIOS&&"."===h[h.length-1]&&(d+=1),Ls.setElementValue(l,c),Xs.select(l,d+f,d+f)),Fs.input(l,a))):Ls.isInputElement(t)&&(i=t,o=e,null!==(r=n)?(s=Ls.getElementValue(i),Ls.setElementValue(i,s.substr(0,r)+o+s.substr(r+o.length))):Ls.setElementValue(i,o),Fs.change(i),Fs.input(i,o)))}function $s(t){return 1===t.length&&("a"<=t&&t<="z"||"A"<=t&&t<="Z")}var Zs=h.nativeMethods,Js=h.utils.browser,Qs=h.eventSandbox.focusBlur,tl=h.Promise,el=g.domUtils.isRadioButtonElement,nl=g.domUtils.getActiveElement,il=g.domUtils.getTabIndexAttributeIntValue;function ol(t){return t===t.toLowerCase()?t.toUpperCase():t.toLowerCase()}function rl(t){var e=nl(t||du),n=null;if(e&&g.domUtils.isIframeElement(e)&&Zs.contentDocumentGetter.call(e))try{n=rl(Zs.contentDocumentGetter.call(e))}catch(t){}return n||e}function sl(t,e,n){if(!el(e))return t;if(!n&&!e.name&&!Js.isChrome)return[e];var i,o,r=(i=e,o=null,n?""===i.name||Js.isFirefox||(o=function(t){return!t.name||t===i||t.name!==i.name}):""!==i.name?o=function(t){return el(t)&&t.name===i.name}:Js.isChrome&&(o=function(t){return el(t)&&!t.name}),o);return r&&(t=g.arrayUtils.filter(t,r)),t}function ll(t,e,n){var i,o,r,s,l,a,u,c,h=e?-1:1,f=g.domUtils.getTopSameDomainWindow(fu).document,d=(i=f,o=Zs.documentActiveElementGetter.call(i),r=o&&il(o),!(o&&r<0)),m=sl(m=g.domUtils.getFocusableElements(f,d),t,n),p=el(t),v=g.arrayUtils.indexOf(m,t);return(e?0===v:v===m.length-1)?!e&&t.tabIndex<0?g.arrayUtils.find(m,function(t){return 0===t.tabIndex}):n||!p?du.body:m[m.length-1-v]:e&&-1===v?m[m.length-1]:(l=(s=m)[v+h],a=n,u=el(l)&&l.name&&!l.checked,c=null,a&&u&&(c=g.arrayUtils.find(s,function(t){return el(t)&&t.name===l.name&&t.checked})),c||l)}function al(t){if($s(t))return t.toUpperCase().charCodeAt(0);var e=g.KEY_MAPS.shiftMap[t]?g.KEY_MAPS.shiftMap[t].charCodeAt(0):t.charCodeAt(0);return g.KEY_MAPS.symbolCharCodeToKeyCode[e]||e}var ul={SPECIAL_KEYS:{capslock:"CapsLock",delete:"U+007F",end:"End",enter:"Enter",esc:"U+001B",home:"Home",ins:"Insert",pagedown:"PageDown",pageup:"PageUp",space:"U+0020",tab:"Tab",alt:"Alt",ctrl:"Control",meta:"Meta",shift:"Shift"},LETTERS:{a:"U+0041",b:"U+0042",c:"U+0043",d:"U+0044",e:"U+0045",f:"U+0046",g:"U+0047",h:"U+0048",i:"U+0049",j:"U+004A",k:"U+004B",l:"U+004C",m:"U+004D",n:"U+004E",o:"U+004F",p:"U+0050",q:"U+0051",r:"U+0052",s:"U+0053",t:"U+0054",u:"U+0055",v:"U+0056",w:"U+0057",x:"U+0058",y:"U+0059",z:"U+005A"},SYMBOLS:{0:"U+0030",1:"U+0031",2:"U+0032",3:"U+0033",4:"U+0034",5:"U+0035",6:"U+0036",7:"U+0037",8:"U+0038",9:"U+0039"," ":"U+0020","!":"U+0021","@":"U+0040","#":"U+0023",$:"U+0024","%":"U+0025","^":"U+005E","*":"U+002A","(":"U+0028",")":"U+0029",_:"U+005F","|":"U+007C","\\":"U+005C","/":"U+002F","?":"U+003F",".":"U+002E",",":"U+002C","<":"U+003C",">":"U+003E","[":"U+005B","]":"U+005D","{":"U+007B","}":"U+007D","§":"U+00A7","±":"U+00B1","'":"U+0027",'"':"U+0022",":":"U+003A",";":"U+003B","`":"U+0060","~":"U+007E"}};function cl(t){return $s(t)?ul.LETTERS[t.toLowerCase()]:ul.SYMBOLS[t]||ul.SPECIAL_KEYS[t]||t}function hl(t,e,n){var i={};return"keyIdentifier"in KeyboardEvent.prototype&&(i.keyIdentifier=t?"":n),"key"in KeyboardEvent.prototype&&(i.key=e),i}var fl=h.utils.browser,dl=h.utils.extend,ml=h.eventSandbox.eventSimulator,pl=(vl._isKeyActivatedInputElement=function(t){return g.domUtils.isInputElement(t)&&/button|submit|reset|radio|checkbox/.test(t.type)},vl.prototype._type=function(t,e){var n,i=t!==this.storedActiveElement,o=!i,r=t,s=g.domUtils.isEditableElement(t),l=g.domUtils.isEditableElement(this.storedActiveElement);try{i&&(n=g.domUtils.isElementInIframe(t)===g.domUtils.isElementInIframe(this.storedActiveElement)||l,o=(!fl.isFirefox||l)&&(!fl.isWebKit||n))}catch(t){}o&&(!fl.isIE&&i&&l&&s&&(r=this.storedActiveElement),js(r,e))},vl.prototype._addKeyPropertyToEventOptions=function(t){return dl(t,hl("keypress"===t.type,this.keyProperty,this.keyIdentifierProperty)),t},vl.prototype.down=function(t){this.storedActiveElement=rl(this.topSameDomainDocument),this.modifierKeyCode&&(t[this.sanitizedKey]=!0),t.shift&&this.isLetter&&(this.keyProperty=ol(this.keyProperty));var e={keyCode:this.keyCode,type:"keydown"};return this._addKeyPropertyToEventOptions(e),ml.keydown(this.storedActiveElement,dl(e,t))},vl.prototype.press=function(t){if(!this.isChar&&!this.specialKeyCode)return!0;var e=rl(this.topSameDomainDocument),n=this.isChar?function(t,e){if("space"===t)return" ";if(e){if($s(t))return ol(t);if(g.KEY_MAPS.reversedShiftMap[t])return g.KEY_MAPS.reversedShiftMap[t]}return t}(this.sanitizedKey,t.shift):null,i=this.specialKeyCode||n.charCodeAt(0),o=e!==this.storedActiveElement;if(fl.isWebKit&&o&&g.domUtils.isElementInIframe(e)!==g.domUtils.isElementInIframe(this.storedActiveElement))return!0;this.storedActiveElement=e;var r={keyCode:i,charCode:i,type:"keypress"};this._addKeyPropertyToEventOptions(r);var s=fl.isAndroid||ml.keypress(e,dl(r,t));if(!s)return s;e=rl(this.topSameDomainDocument),!n||t.ctrl||t.alt||this._type(e,n);var l=vl._isKeyActivatedInputElement(e),a=g.domUtils.isButtonElement(e),u=fl.isSafari&&0<=fl.compareVersions([fl.webkitVersion,"603.1.30"]);return fl.isFirefox||u||!l&&!a||"enter"!==this.sanitizedKey||e.click(),s},vl.prototype.up=function(t){this.modifierKeyCode&&(t[this.sanitizedKey]=!1);var e={keyCode:this.keyCode,type:"keyup"};this._addKeyPropertyToEventOptions(e);var n=ml.keyup(rl(this.topSameDomainDocument),dl(e,t)),i=rl(this.topSameDomainDocument);return!fl.isFirefox&&!fl.isSafari&&(!fl.isChrome||53<=fl.version)&&n&&"space"===this.sanitizedKey&&vl._isKeyActivatedInputElement(i)&&i.click(),n},Object.defineProperty(vl.prototype,"key",{get:function(){return this.sanitizedKey},enumerable:!1,configurable:!0}),vl);function vl(t,e){this.isLetter=$s(t),this.isChar=1===t.length||"space"===t,this.sanitizedKey=g.getSanitizedKey(t),this.modifierKeyCode=g.KEY_MAPS.modifiers[this.sanitizedKey],this.specialKeyCode=g.KEY_MAPS.specialKeys[this.sanitizedKey],this.keyCode=null,this.keyIdentifierProperty=cl(e),this.topSameDomainDocument=g.domUtils.getTopSameDomainWindow(fu).document,this.keyProperty=g.KEY_MAPS.keyProperty[e]||e,this.isChar&&"space"!==t?this.keyCode=al(this.sanitizedKey):this.modifierKeyCode?this.keyCode=this.modifierKeyCode:this.specialKeyCode&&(this.keyCode=this.specialKeyCode),this.storedActiveElement=null}var gl,El={ctrlA:"ctrl+a",backspace:"backspace",delete:"delete",left:"left",right:"right",up:"up",down:"down",shiftLeft:"shift+left",shiftRight:"shift+right",shiftUp:"shift+up",shiftDown:"shift+down",shiftHome:"shift+home",shiftEnd:"shift+end",home:"home",end:"end",enter:"enter",tab:"tab",shiftTab:"shift+tab",esc:"esc"},yl=h.Promise,Sl=h.utils.browser,bl=h.eventSandbox.eventSimulator,_l=h.eventSandbox.elementEditingWatcher,Pl=y.textSelection,Al=y.eventUtils,wl=y.domUtils,xl=i.selectElement,Cl=null,Tl=null;function Ml(){Tl=Cl=null,Al.unbind(this,"blur",Ml,!0)}function Ul(t){var e,n,i,o;wl.isTextAreaElement(t)&&(Cl!==t&&(Al.bind(t,"blur",Ml,!0),Cl=t),e=t,n=Pl.hasInverseSelection(e),i=wl.getTextAreaValue(e),o=n?Pl.getSelectionStart(e):Pl.getSelectionEnd(e),Tl=i&&o?wl.getTextareaIndentInLine(e,o):0)}function Dl(t,e){var n,i,o,r,s,l,a=wl.getTextAreaValue(t);a&&(n=Pl.getSelectionStart(t),i=Pl.getSelectionEnd(t),o=Pl.hasInverseSelection(t),s=(r=a.substring(0,o?n:i)).lastIndexOf("\n"),l=r.substring(0,s),null!==Tl&&Cl===t||Ul(t),s=l.lastIndexOf("\n"),kl(t,n,i,o,Math.min(s+1+Tl,l.length),e))}function Il(t,e){var n,i,o,r,s,l,a,u,c,h,f=wl.getTextAreaValue(t);f&&(n=Pl.getSelectionStart(t),i=Pl.getSelectionEnd(t),u=(r=(o=Pl.hasInverseSelection(t))?n:i)+(l=-1===(c=(s=f.substring(r)).indexOf("\n"))?s.length:c+1),h=-1===(c=(a=s.substring(l)).indexOf("\n"))?a.length:c,null!==Tl&&Cl===t||Ul(t),kl(t,n,i,o,u=Math.min(u+Tl,u+h),e))}function kl(t,e,n,i,o,r){var s=null,l=null,l=r?(s=e!==n&&i?n:e,o):s=o;Pl.select(t,s,l)}function Ol(t,e,n){wl.isInputElement(t)&&"number"===t.type&&("-"===e.charAt(0)&&"."===e.charAt(1)&&(e=e.substring(1)),"."===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1))),wl.setElementValue(t,e),Pl.select(t,n,n),bl.input(t)}function Bl(t,e){var n,i,o,r,s,l,a,u;return wl.isTextEditableElement(t)&&(n=Pl.getSelectionStart(t),i=Pl.getSelectionEnd(t),o=Pl.hasInverseSelection(t),s=null,s=(r=!wl.isTextAreaElement(t)||wl.getTextareaLineNumberByPosition(t,n)===wl.getTextareaLineNumberByPosition(t,i))?o?i:n:o?n:i,a=-1===(l=wl.getElementValue(t).substring(0,s).lastIndexOf("\n"))?0:l+1,u=null,r?(u=e?s:a,Pl.select(t,u,a)):o?Pl.select(t,i,a):Pl.select(t,n,a)),yl.resolve()}function Nl(t,e){var n,i,o,r,s,l,a,u,c;return wl.isTextEditableElement(t)&&(n=Pl.getSelectionStart(t),i=Pl.getSelectionEnd(t),o=Pl.hasInverseSelection(t),s=null,u=s=(r=!wl.isTextAreaElement(t)||wl.getTextareaLineNumberByPosition(t,n)===wl.getTextareaLineNumberByPosition(t,i))?o?i:n:o?n:i,c=null,u+=-1===(a=(l=wl.getElementValue(t).substring(s)).indexOf("\n"))?l.length:a,r?(c=e?s:u,Pl.select(t,c,u)):o?Pl.select(t,i,u):Pl.select(t,n,u)),yl.resolve()}function Fl(t){return Bl(t,!0)}function Yl(t){return Nl(t,!0)}function Kl(t){return wl.isRadioButtonElement(t)&&!Sl.isFirefox}function Ll(t,e){return Vl(t,e,!1).then(function(t){t&&(t.checked=!0)})}function Vl(t,e,n){return void 0===n&&(n=!0),t?(wl.isSelectElement(t)&&xl.collapseOptionList(),i=t,o=e,r=n,new tl(function(t){var e=ll(i,o,r);e?Qs.focus(e,function(){return t(e)}):t()}).then(function(t){return t&&wl.isTextEditableInput(t)&&Pl.select(t),t})):yl.resolve();var i,o,r}var Xl=((gl={})[El.ctrlA]=function(t){return wl.isEditableElement(t)&&Pl.select(t),yl.resolve()},gl[El.backspace]=function(t){var e,n,i;return wl.isTextEditableElementAndEditingAllowed(t)&&(e=Pl.getSelectionStart(t),n=Pl.getSelectionEnd(t),i=wl.getElementValue(t).replace(/\r\n/g,"\n"),n===e?0<e&&Ol(t,i.substring(0,e-1)+i.substring(n,i.length),e-1):Ol(t,i.substring(0,e)+i.substring(n,i.length),e)),wl.isContentEditableElement(t)&&Pl.deleteSelectionContents(t),yl.resolve()},gl[El.delete]=function(t){var e,n,i;return wl.isTextEditableElementAndEditingAllowed(t)&&(e=Pl.getSelectionStart(t),n=Pl.getSelectionEnd(t),i=wl.getElementValue(t).replace(/\r\n/g,"\n"),n===e?e<i.length&&Ol(t,i.substring(0,e)+i.substring(n+1,i.length),e):Ol(t,i.substring(0,e)+i.substring(n,i.length),e)),wl.isContentEditableElement(t)&&Pl.deleteSelectionContents(t),yl.resolve()},gl[El.left]=function(t){var e,n,i,o,r=null;return wl.isSelectElement(t)&&xl.switchOptionsByKeys(t,"left"),Kl(t)?Ll(t,!0):(wl.isTextEditableElement(t)&&(e=(r=Pl.getSelectionStart(t)||0)===Pl.getSelectionEnd(t)?r-1:r,Pl.select(t,e,e),Ul(t)),wl.isContentEditableElement(t)&&(r=Pl.getSelectionStart(t))!==Pl.getSelectionEnd(t)&&(n=Pl.getSelectionByElement(t),o={node:(i=Pl.hasInverseSelectionContentEditable(t))?n.focusNode:n.anchorNode,offset:i?n.focusOffset:n.anchorOffset},Pl.selectByNodesAndOffsets(o,o,!0)),yl.resolve())},gl[El.right]=function(t){var e,n,i,o,r=null,s=null;return wl.isSelectElement(t)&&xl.switchOptionsByKeys(t,"right"),Kl(t)?Ll(t,!1):(wl.isTextEditableElement(t)&&(e=(r=Pl.getSelectionStart(t))===(s=Pl.getSelectionEnd(t))?s+1:s,r===wl.getElementValue(t).length&&(e=r),Pl.select(t,e,e),Ul(t)),wl.isContentEditableElement(t)&&(r=Pl.getSelectionStart(t))!==(s=Pl.getSelectionEnd(t))&&(n=Pl.getSelectionByElement(t),o={node:(i=Pl.hasInverseSelectionContentEditable(t))?n.anchorNode:n.focusNode,offset:i?n.anchorOffset:n.focusOffset},Pl.selectByNodesAndOffsets(o,o,!0)),yl.resolve())},gl[El.up]=function(t){return wl.isSelectElement(t)&&xl.switchOptionsByKeys(t,"up"),Kl(t)?Ll(t,!0):Sl.isWebKit&&wl.isInputElement(t)?Bl(t):(wl.isTextAreaElement(t)&&Dl(t,!1),yl.resolve())},gl[El.down]=function(t){return wl.isSelectElement(t)&&xl.switchOptionsByKeys(t,"down"),Kl(t)?Ll(t,!1):Sl.isWebKit&&wl.isInputElement(t)?Nl(t):(wl.isTextAreaElement(t)&&Il(t,!1),yl.resolve())},gl[El.shiftLeft]=function(t){var e,n;return wl.isTextEditableElement(t)&&((e=Pl.getSelectionStart(t))===(n=Pl.getSelectionEnd(t))||Pl.hasInverseSelection(t)?Pl.select(t,n,Math.max(e-1,0)):Pl.select(t,e,Math.max(n-1,0)),Ul(t)),yl.resolve()},gl[El.shiftRight]=function(t){var e,n,i;return wl.isTextEditableElement(t)&&(e=Pl.getSelectionStart(t),n=Pl.getSelectionEnd(t),i=wl.getElementValue(t).length,e!==n&&Pl.hasInverseSelection(t)?Pl.select(t,n,Math.min(e+1,i)):Pl.select(t,e,Math.min(n+1,i)),Ul(t)),yl.resolve()},gl[El.shiftUp]=function(t){return Sl.isWebKit&&wl.isInputElement(t)?Fl(t):(wl.isTextAreaElement(t)&&Dl(t,!0),yl.resolve())},gl[El.shiftDown]=function(t){return Sl.isWebKit&&wl.isInputElement(t)?Yl(t):(wl.isTextAreaElement(t)&&Il(t,!0),yl.resolve())},gl[El.shiftHome]=Fl,gl[El.shiftEnd]=Yl,gl[El.home]=Bl,gl[El.end]=Nl,gl[El.enter]=function(t){var e,n,i,o,r,s;return wl.isSelectElement(t)&&xl.collapseOptionList(),wl.isInputElement(t)?(Sl.isIE||_l.processElementChanging(t),(e=wl.getParents(t,"form")[0])&&function(t,e){var n=t.querySelectorAll("input, button"),i=null,o=null;for(o=0;o<n.length;o++)if(!i&&"submit"===n[o].type&&!n[o].disabled){i=n[o];break}if(i)bl.click(i);else if(wl.blocksImplicitSubmission(e)){for(var r=t.getElementsByTagName("input"),s=[],o=0;o<r.length;o++)wl.blocksImplicitSubmission(r[o])&&s.push(r[o]);1===s.length&&s[0]===e&&e.validity.valid&&bl.submit(t)&&t.submit()}}(e,t)):wl.isTextAreaElement(t)?(n=Pl.getSelectionStart(t),o=(i=wl.getTextAreaValue(t)).substring(0,n),r=i.substring(n),s=n+1,Ol(t,o+String.fromCharCode(10)+r,s)):t.tagName&&wl.isAnchorElement(t)&&bl.click(t),yl.resolve()},gl[El.tab]=function(t){return Vl(t,!1)},gl[El.shiftTab]=function(t){return Vl(t,!0)},gl[El.esc]=function(t){return wl.isSelectElement(t)&&xl.collapseOptionList(),yl.resolve()},gl),Rl=h.Promise,Wl=h.utils.browser,Hl=h.eventSandbox.message,Gl=h.nativeMethods,ql="automation|press|request",zl="automation|press|response";Hl.on(Hl.SERVICE_MSG_RECEIVED_EVENT,function(t){t.message.cmd===ql&&(h.on(h.EVENTS.beforeUnload,function(){return Hl.sendServiceMsg({cmd:zl},t.source)}),new jl(t.message.keyCombinations,t.message.options).run().then(function(){return Hl.sendServiceMsg({cmd:zl},t.source)}))});var jl=($l._getKeyPressSimulators=function(t){var e=function(t){for(var e=t.slice(),n=0;n<t.length;n++){var i=t[n];if("shift"===i.toLowerCase()){var o=t[n+1];if(!o)continue;g.KEY_MAPS.shiftMap[o]?t[n+1]=g.KEY_MAPS.shiftMap[o]:g.KEY_MAPS.reversedShiftMap[o]&&(e[n+1]=g.KEY_MAPS.reversedShiftMap[o])}!g.KEY_MAPS.shiftMap[i]||t[n-1]&&"shift"===t[n-1].toLowerCase()||(t[n]=g.KEY_MAPS.shiftMap[i],t.splice(n,0,"shift"),e.splice(n,0,"shift"),n++)}return{actualKeys:t,eventKeyProperties:e}}(g.getKeyArray(t)),n=e.actualKeys,i=e.eventKeyProperties;return g.arrayUtils.map(n,function(t,e){return new pl(t,i[e])})},$l._getShortcuts=function(t){for(var e=g.getKeyArray(t.toLowerCase()),n=[],i=[],o=[],r=0;r<e.length;r++)for(i.push(e[r]),o=i.slice();o.length;){var s=o.join("+");Xl[s]?(n.push(s),i=o=[]):o.shift()}return n},$l._getShortcutHandlers=function(t){for(var e,n,i,o=$l._getShortcuts(t.toLowerCase()),r={},s="",l=0;l<o.length;l++)e=o[l],n=t.indexOf(e),i=e.length,r[s+=t.substring(0,n+i)]=Xl[e],t=t.substring(n+i);return r},$l.prototype._down=function(t){this.pressedKeyString+=(this.pressedKeyString?"+":"")+t.key;var e=!t.down(this.modifiersState);return Rl.resolve(e)},$l.prototype._press=function(t,e){var n=this;if(e&&!this.isSelectElement)return g.delay(this.automationSettings.keyActionStepDelay);var i=this.shortcutHandlers[this.pressedKeyString],o=!1;return i&&!Wl.isFirefox&&"enter"!==t.key||(o=!t.press(this.modifiersState)),o&&!this.isSelectElement||!i?g.delay(this.automationSettings.keyActionStepDelay):i(rl(this.topSameDomainDocument)).then(function(){return g.delay(n.automationSettings.keyActionStepDelay)})},$l.prototype._up=function(t){return t.up(this.modifiersState),g.delay(this.automationSettings.keyActionStepDelay)},$l.prototype._runCombination=function(t){var n=this;this.modifiersState={ctrl:!1,alt:!1,shift:!1,meta:!1},this.isSelectElement=g.domUtils.isSelectElement(rl(this.topSameDomainDocument)),this.pressedKeyString="",this.shortcutHandlers=$l._getShortcutHandlers(t);var e=$l._getKeyPressSimulators(t);return g.promiseUtils.each(e,function(e){return n._down(e).then(function(t){return n._press(e,t)})}).then(function(){return g.arrayUtils.reverse(e),g.promiseUtils.each(e,function(t){return n._up(t)})})},$l.prototype.run=function(){var e=this,t=g.domUtils.getActiveElement(),n=g.domUtils.isIframeElement(t);if(!N(fu)&&n&&Gl.contentWindowGetter.call(t)){var i={cmd:ql,keyCombinations:this.keyCombinations,options:this.options};return g.sendRequestToFrame(i,zl,Gl.contentWindowGetter.call(t))}return g.promiseUtils.each(this.keyCombinations,function(t){return e._runCombination(t).then(function(){return g.delay(e.automationSettings.keyActionStepDelay)})})},$l);function $l(t,e){this.keyCombinations=t,this.isSelectElement=!1,this.pressedKeyString="",this.modifiersState=null,this.shortcutHandlers=null,this.topSameDomainDocument=g.domUtils.getTopSameDomainWindow(fu).document,this.automationSettings=new q(e.speed),this.options=e}var Zl,Jl=h.Promise,Ql=h.utils.extend,ta=h.utils.browser,ea=h.eventSandbox.eventSimulator,na=y.domUtils,ia=y.eventUtils,oa=y.delay,ra=(U(sa,Zl=Uo),sa.prototype._mousedown=function(t){var e=this;return ki.rightButtonDown().then(function(){return e.eventState.activeElementBeforeMouseDown=na.getActiveElement(),e.eventState.simulateDefaultBehavior=ea.mousedown(t.element,t.options),e._focus(t)})},sa.prototype._focus=function(t){return!1===this.simulateDefaultBehavior?Ki():Qo(na.isContentEditableElement(this.element)?this.element:t.element,!ta.isIE||this.eventState.activeElementBeforeMouseDown===na.getActiveElement(),this.caretPos).then(Ki)},sa.prototype._mouseup=function(e){var t=this;return ki.buttonUp().then(function(){return t._getElementForEvent(e)}).then(function(t){return ea.mouseup(t,e.options)})},sa.prototype._contextmenu=function(e){return this._getElementForEvent(e).then(function(t){ea.contextmenu(t,e.options),na.isElementFocusable(t)||er(t)})},sa.prototype.run=function(t){var o=this,r=null;return this._ensureElement(t).then(function(t){var e=t.element,n=t.clientPoint,i=t.devicePoint;return r={point:n,element:e,options:Ql({clientX:n.x,clientY:n.y,screenX:i.x,screenY:i.y,button:ia.BUTTON.right},o.modifiers)},Jl.all([oa(o.automationSettings.mouseActionStepDelay),o._mousedown(r)])}).then(function(){return o._mouseup(r)}).then(function(){return o._contextmenu(r)})},sa);function sa(t,e){var n=Zl.call(this,t,e)||this;return n.modifiers=e.modifiers,n.caretPos=e.caretPos,n.eventState={simulateDefaultBehavior:!0,activeElementBeforeMouseDown:null},n}var la=h.utils.browser,aa=y.domUtils,ua=y.positionUtils,ca=y.styleUtils,ha=y.contentEditable,fa=y.arrayUtils,da=["direction","font-family","font-size","font-size-adjust","font-variant","font-weight","font-style","letter-spacing","line-height","text-align","text-indent","text-transform","word-wrap","word-spacing","padding-top","padding-left","padding-right","padding-bottom","margin-top","margin-left","margin-right","margin-bottom","border-top-width","border-left-width","border-right-width","border-bottom-width"];function ma(t,e){var n,i,o,r,s,l=ca.getBordersWidth(t),a=ua.getOffsetPosition(t),u=t.scrollHeight||t.getBoundingClientRect().height,c=Math.ceil(e.left),h=Math.ceil(e.top),f=Math.floor(e.bottom);return aa.isTextAreaElement(t)||(i=(n=ua.offsetToClientCoords({x:a.left,y:a.top})).x+l.left+1,o=n.y+l.top+1,r=n.y+l.top+l.bottom+u,s=n.y+l.top+u-1,c=Math.ceil(c<=n.x?i:e.left),h=Math.ceil(h<=n.y?o:e.top),f=Math.floor(r<=f?s:e.bottom)),{left:c,top:h,bottom:f}}function pa(t){var e=ca.getElementScroll(du);return{left:t.left+e.left,top:t.top+e.top,bottom:t.bottom+e.top}}function va(t,e){var n=t.getBoundingClientRect(),i=function(e){var t,n,i,o=du.body,r=ua.getOffsetPosition(e),s=ca.getElementMargin(e),l=r.top-s.top,a=r.left-s.left,u=du.createElement("div"),c="white-space:pre-wrap;border-style:solid;";return"absolute"===ca.get(o,"position")&&(t=ca.getElementMargin(o),n=ca.get(o,"left"),i=ca.get(o,"top"),a-=t.left+(parseInt(n.replace("px",""),10)||0),l-=t.top+(parseInt(i.replace("px",""),10)||0)),fa.forEach(da,function(t){c+=t+":"+ca.get(e,t)+";"}),ca.set(u,{cssText:c,position:"absolute",left:a+"px",top:l+"px",width:e.scrollWidth+"px",height:e.scrollHeight+"px"}),h.nativeMethods.nodeTextContentSetter.call(u,aa.getElementValue(e)+" "),o.appendChild(u),u}(t),o=null,r=t.getBoundingClientRect(),s=r.top-n.top,l=r.left-n.left,a=aa.getElementValue(t).length;try{var u=du.createRange();u.setStart(h.nativeMethods.nodeFirstChildGetter.call(i),Math.min(e,a)),u.setEnd(h.nativeMethods.nodeFirstChildGetter.call(i),Math.min(e+1,a+1)),aa.isTextAreaElement(t)&&(0!==(o=u.getBoundingClientRect()).width||0!==o.height)||(o=u.getClientRects()[0])}catch(t){o=null}return aa.remove(i),o?{width:o.width,height:o.height,top:o.top-s,bottom:o.bottom-s,left:o.left-l,right:o.right-l}:null}function ga(t,e){var n,i,o,r,s,l,a=null;return(a=aa.isContentEditableElement(t)?(o=t,r=e,s=aa.findDocument(o).createRange(),l=ha.calculateNodeAndOffsetByPosition(o,r),s.setStart(l.node,Math.min(l.offset,l.node.length)),s.setEnd(l.node,Math.min(l.offset,l.node.length)),s.getClientRects()[0]):"function"==typeof t.createTextRange?(n=e,(i=t.createTextRange()).collapse(!0),i.moveStart("character",n),i.moveEnd("character",n),i.collapse(!0),i.getBoundingClientRect()):va(t,e))?{x:(a=pa(a=ma(t,a))).left,y:Math.floor(a.top+(a.bottom-a.top)/2)}:null}function Ea(t,e){var n=aa.isTextEditableElement(t),i=aa.isContentEditableElement(t);return n&&0<aa.getElementValue(t).length||i&&ha.getContentEditableValue(t).length?ga(t,e):ua.findCenter(t)}function ya(t,e,n){var i=aa.findDocument(t).createRange();i.setStart(e,Math.min(n,e.length)),i.setEnd(e,Math.min(n,e.length));var o=i.getClientRects()[0];return o?{x:(o=pa(ma(t,o))).left,y:Math.floor(o.top+(o.bottom-o.top)/2)}:null}var Sa,ba=h.Promise,_a=h.utils.browser,Pa=h.utils.featureDetection,Aa=h.eventSandbox.eventSimulator,wa=h.eventSandbox.focusBlur,xa=y.contentEditable,Ca=y.domUtils,Ta=y.positionUtils,Ma=y.eventUtils,Ua=y.delay,Da=(U(Ia,Sa=Uo),Ia._calculateEventArguments=function(t){var e=Ta.offsetToClientCoords(t);return H(e).then(function(t){if(!t)throw new Error(G.elementIsInvisibleError);return{element:t,options:{clientX:e.x,clientY:e.y}}})},Ia.prototype._move=function(t){var e=this,n=t.element,i=t.offsetX,o=t.offsetY,r=t.speed,s=new pi({offsetX:i,offsetY:o,speed:r},!1);return new wo(n,s).run().then(function(){return Ua(e.automationSettings.mouseActionStepDelay)})},Ia.prototype._bindMousedownHandler=function(){var e=this,n=function(t){e.eventState.mousedownPrevented=t.defaultPrevented,Ma.preventDefault(t),Ma.unbind(e.element,"mousedown",n)};Ma.bind(this.element,"mousedown",n)},Ia.prototype._calculateAbsoluteStartPoint=function(){throw new Error("Not implemented")},Ia.prototype._calculateAbsoluteEndPoint=function(){throw new Error("Not implemented")},Ia.prototype._moveToPoint=function(t){!function(t,e){if(aa.isEditableElement(t)){var n=aa.isTextAreaElement(t);if(!aa.isInputElement(t)||!(la.isFirefox||la.isIE&&10<la.version)){var i=ua.getOffsetPosition(t),o=ca.getBordersWidth(t),r=ca.getElementScroll(t),s=e.x-i.left-o.left,l=e.y-i.top-o.top,a=null;if(n)return l<r.top&&(a=l),l>t.clientHeight+r.top&&(a=l-t.clientHeight),null!==a&&ca.setScrollTop(t,Math.round(a));s<r.left&&(a=s),s>t.clientWidth+r.left&&(a=s-t.clientWidth),null!==a&&ca.setScrollLeft(t,Math.round(a))}}}(this.element,t),this.clientPoint=function(t,e){var n=aa.isTextEditableElement(t),i=aa.isInputElement(t);if(!n&&!aa.isContentEditableElement(t))return e;var o=ua.getOffsetPosition(t),r=ca.getBordersWidth(t),s=ca.getElementScroll(t),l=o.left+r.left+t.clientWidth;return i&&n&&(la.isFirefox||la.isIE&&10<la.version)?{x:Math.min(e.x,l),y:e.y}:{x:e.x-s.left,y:e.y-s.top}}(this.element,t);var e={element:du.documentElement,offsetX:this.clientPoint.x,offsetY:this.clientPoint.y,speed:this.speed};return this._move(e)},Ia.prototype._mousedown=function(){var n=this;return ki.leftButtonDown().then(function(){return Ia._calculateEventArguments(n.clientPoint)}).then(function(t){n.eventArgs=t;var e=(_a.isWebKit||_a.isIE)&&Ca.isSelectElement(n.element);return e&&n._bindMousedownHandler(),n.eventState.simulateDefaultBehavior=Aa[n.downEvent](n.eventArgs.element,n.eventArgs.options),!1===n.eventState.simulateDefaultBehavior&&(n.eventState.simulateDefaultBehavior=e&&!n.eventState.mousedownPrevented),n._focus()})},Ia.prototype._focus=function(){var n=this;return new ba(function(t){var e=Ca.isContentEditableElement(n.element)?xa.findContentEditableParent(n.element):n.element;wa.focus(e,t,!1,!0)})},Ia.prototype._setSelection=function(){throw new Error("Not implemented")},Ia.prototype._mouseup=function(){var e=this;return ki.buttonUp().then(function(){return e._setSelection(),Ia._calculateEventArguments(e.clientPoint)}).then(function(t){e.eventArgs=t,Aa[e.upEvent](e.eventArgs.element,e.eventArgs.options)})},Ia.prototype.run=function(){var t=this;return this.absoluteStartPoint=this._calculateAbsoluteStartPoint(),this.absoluteEndPoint=this._calculateAbsoluteEndPoint(),this._moveToPoint(this.absoluteStartPoint).then(function(){return t._mousedown()}).then(function(){return t._moveToPoint(t.absoluteEndPoint)}).then(function(){return t._mouseup()})},Ia);function Ia(t,e){var n=Sa.call(this,t,e)||this;return n.absoluteStartPoint=null,n.absoluteEndPoint=null,n.clientPoint=null,n.speed=e.speed,n.downEvent=Pa.isTouchDevice?"touchstart":"mousedown",n.upEvent=Pa.isTouchDevice?"touchend":"mouseup",n.eventArgs={options:null,element:null},n.eventState={mousedownPrevented:!1,simulateDefaultBehavior:!0},n}var ka,Oa=y.textSelection,Ba=y.domUtils,Na=y.positionUtils,Fa=(U(Ya,ka=Da),Ya.prototype._calculateAbsoluteStartPoint=function(){return Ea(this.element,this.startPos)||Na.findCenter(this.element)},Ya.prototype._calculateAbsoluteEndPoint=function(){var t=Ea(this.element,this.endPos);return t||(Ba.isContentEditableElement(this.element)?function(t,e,n){for(var i=n<e?1:-1,o=n,r=null;o!==e&&!(r=ga(t,o+=i)););return r=r||ga(t,e)||ua.findCenter(t)}(this.element,this.startPos,this.endPos):Na.findCenter(this.element))},Ya.prototype._setSelection=function(){var t=Ba.isTextEditableElement(this.element),e=Ba.isContentEditableElement(this.element);(t||e)&&!1!==this.eventState.simulateDefaultBehavior&&Oa.select(this.element,this.startPos,this.endPos)},Ya.prototype.run=function(t){var e=this;return this._ensureElement(t).then(function(){return ka.prototype.run.call(e)})},Ya);function Ya(t,e,n,i){var o=ka.call(this,t,i)||this;return o.startPos=e,o.endPos=n,o}var Ka,La=y.textSelection,Va=y.contentEditable,Xa=y.positionUtils,Ra=(U(Wa,Ka=Da),Wa.prototype._calculateAbsoluteStartPoint=function(){return ya(this.element,this.startNode,this.startOffset)||Xa.findCenter(this.element)},Wa.prototype._calculateAbsoluteEndPoint=function(){return ya(this.element,this.endNode,this.endOffset)||Xa.findCenter(this.element)},Wa.prototype._setSelection=function(){var t,e;!1!==this.eventState.simulateDefaultBehavior&&(t={node:this.startNode,offset:this.startOffset},e={node:this.endNode,offset:this.endOffset},La.selectByNodesAndOffsets(t,e,!0))},Wa);function Wa(t,e,n){var i=Ka.call(this,Va.getNearestCommonAncestor(t,e),n)||this,o=Va.getFirstVisiblePosition(t),r=Va.getLastVisiblePosition(e),s={node:t,offset:o},l={node:e,offset:r},a=Va.calculatePositionByNodeAndOffset(i.element,s);return Va.calculatePositionByNodeAndOffset(i.element,l)<a&&(o=Va.getLastVisiblePosition(t),r=Va.getFirstVisiblePosition(e)),s=Va.calculateNodeAndOffsetByPosition(t,o),l=Va.calculateNodeAndOffsetByPosition(e,r),i.startNode=s.node,i.startOffset=s.offset,i.endNode=l.node,i.endOffset=l.offset,i}var Ha=h.Promise,Ga=h.utils.extend,qa=h.utils.browser,za=h.eventSandbox.eventSimulator,ja=h.eventSandbox.elementEditingWatcher,$a=y.domUtils,Za=y.promiseUtils,Ja=y.contentEditable,Qa=y.textSelection,tu=y.delay,eu=y.KEY_MAPS.specialKeys,nu=(iu.findTextEditableChild=function(t){var e=null;if(!$a.isEditableElement(t))for(var n=t.querySelectorAll("*"),i=0;i<n.length;i++)if($a.isTextEditableElementAndEditingAllowed(n[i])){e=n[i];break}return e},iu.prototype._calculateEventArguments=function(t){var e=$a.getActiveElement(),n=$a.isContentEditableElement(this.element),i=this.eventArgs.element||this.element;n||e===i||(i=iu.findTextEditableChild(e)||e);var o=Ga({keyCode:t?this.currentCharCode:this.currentKeyCode},this.modifiers);return t&&(o.charCode=this.currentCharCode),Ga(o,hl(t,this.currentKey,this.currentKeyIdentifier)),{element:i,options:o}},iu.prototype._calculateTargetElement=function(){var t=$a.getActiveElement(),e=$a.isContentEditableElement(this.element);if(e){if(t!==Ja.findContentEditableParent(this.element))return void(this.eventState.skipType=!0)}else if(t!==this.element)return void(this.eventState.skipType=!0);this.element=e?this.element:t},iu.prototype._click=function(t){var e,n=this,i=$a.getActiveElement(),o=$a.isTextEditableElementAndEditingAllowed(this.element),r=$a.isContentEditableElement(this.element);if(i===this.element)return o&&ja.watchElementEditing(this.element),(o||r)&&(e=Qa.getSelectionStart(this.element),isNaN(parseInt(this.caretPos,10))||this.caretPos===e||Qa.select(this.element,this.caretPos,this.caretPos)),Ha.resolve();var s=c(this.element),l=s.offsetX,a=s.offsetY,u=new fi({offsetX:this.elementChanged?l:this.offsetX,offsetY:this.elementChanged?a:this.offsetY,speed:this.speed,caretPos:this.caretPos,modifiers:this.modifiers});return new Or(this.element,u).run(t).then(function(){return tu(n.automationSettings.mouseActionStepDelay)})},iu.prototype._type=function(){var t=this;if(this.eventState.skipType)return Ha.resolve();var e=$a.isContentEditableElement(this.element);return this.replace&&($a.isTextEditableElementAndEditingAllowed(this.element)?Qa.select(this.element):e&&Qa.deleteSelectionContents(this.element,!0)),Za.whilst(function(){return!t._isTypingFinished()},function(){return t._typingStep()})},iu.prototype._isTypingFinished=function(){return this.currentPos===this.typingText.length},iu.prototype._typingStep=function(){var t=this.typingText.charAt(this.currentPos);return this.currentKeyCode=al(t),this.currentCharCode=this.typingText.charCodeAt(this.currentPos),this.currentKey=this.currentKeyCode===eu.enter?"Enter":t,this.currentKeyIdentifier=cl(this.currentKey),this.ignoreChangeEvent=$a.getElementValue(this.element)===ja.getElementSavedValue(this.element),this._keydown(),this._keypress(),this._keyup()},iu.prototype._keydown=function(){this.eventArgs=this._calculateEventArguments(),this.eventState.simulateKeypress=za.keydown(this.eventArgs.element,this.eventArgs.options)},iu.prototype._keypress=function(){!1!==this.eventState.simulateKeypress&&(this.eventArgs=this._calculateEventArguments(!0),this.eventState.simulateTypeChar=qa.isAndroid||za.keypress(this.eventArgs.element,this.eventArgs.options))},iu.prototype._keyup=function(){var t=this,e=this.eventArgs.element;this.eventArgs=this._calculateEventArguments();var n=$a.isTextEditableElement(this.element),i=$a.isContentEditableElement(this.element),o=this.paste||!n&&!i;return Ha.resolve().then(function(){return o?t._typeAllText(e):t._typeChar(e)}).then(function(){za.keyup(t.eventArgs.element,t.eventArgs.options),o?t.currentPos=t.typingText.length:t.currentPos++})},iu.prototype._typeChar=function(t){if(!1===this.eventState.simulateKeypress||!1===this.eventState.simulateTypeChar)return this.ignoreChangeEvent&&ja.restartWatchingElementEditing(t),tu(this.automationSettings.keyActionStepDelay);var e=this.typingText.charAt(this.currentPos),n=/^\d$/.test(e),i=0===this.currentPos?null:this.typingText.charAt(this.currentPos-1);if($a.isInputElement(t)&&"number"===t.type){var o=Qa.getSelectionStart(t),r=$a.getInputValue(t).length,s=/^\d/.test(this.typingText);if(!n&&(s||!("."===e||"-"===e&&r)||0!==o))return tu(this.automationSettings.keyActionStepDelay);n&&("."===i||"-"===i&&!r)&&(e=i+e)}return js(t,e,null),tu(this.automationSettings.keyActionStepDelay)},iu.prototype._typeAllText=function(t){return js(t,this.typingText,this.caretPos),tu(this.automationSettings.keyActionStepDelay)},iu.prototype.run=function(t){var e=this;return this._click(t).then(function(){return e._calculateTargetElement()}).then(function(){return e._type()})},iu);function iu(t,e,n){this.element=iu.findTextEditableChild(t)||t,this.typingText=e.toString(),this.modifiers=n.modifiers,this.caretPos=n.caretPos,this.replace=n.replace,this.paste=n.paste,this.offsetX=n.offsetX,this.offsetY=n.offsetY,this.speed=n.speed,this.automationSettings=new q(this.speed),this.elementChanged=t!==this.element,this.currentPos=0,this.currentKeyCode=null,this.currentCharCode=null,this.currentKey=null,this.currentKeyIdentifier=null,this.ignoreChangeEvent=!0,this.eventArgs={options:null,element:null},this.eventState={skipType:!1,simulateKeypress:!0,simulateTypeChar:!0}}var ou=(ru.prototype.run=function(){var i=this;return t.doUpload(this.element,this.paths).then(function(t){if(t.length){var e=g.arrayUtils.map(t,function(t){return t.path}),n=g.arrayUtils.reduce(t,function(t,e){return t.concat(e.resolvedPaths)},[]);throw i.createError(e,n)}})},ru);function ru(t,e,n){this.element=t,this.paths=e,this.createError=n}var su=y.domUtils,lu=y.contentEditable,au={};au.DispatchEvent=C,au.SetScroll=Oo,au.ScrollIntoView=Fo,au.Click=Or,au.SelectChildClick=qr,au.DblClick=ns,au.DragToOffset=xs,au.DragToElement=Us,au.Hover=ks,au.Press=jl,au.RClick=ra,au.SelectText=Fa,au.SelectEditableContent=Ra,au.Type=nu,au.Upload=ou,au.MouseOptions=ui,au.ClickOptions=fi,au.TypeOptions=_i,au.ERROR_TYPES=G,au.AutomationSettings=q,au.getOffsetOptions=r,au.calculateSelectTextArguments=function(t,e){void 0===e&&(e={});var n,i,o,r,s,l,a,u,c,h,f,d=su.isTextEditableElement(t),m=d?0:lu.getFirstVisiblePosition(t),p=d?su.getElementValue(t).length:lu.getLastVisiblePosition(t),v=e.startPos?Math.min(e.startPos,p):m,g=void 0===e.endPos||null===e.endPos?p:Math.min(e.endPos,p);return void 0!==e.offset?(g=0<=e.offset?Math.min(e.offset,g):(v=g,Math.max(0,g+e.offset)),{startPos:v,endPos:g}):void 0!==e.startLine?(n=t,i=e,o=su.getTextAreaValue(n),r=o&&o.length?o.split("\n"):[],s=r.length-1,l=i.startLine?Math.min(i.startLine,s):0,a=r[l]?r[l].length:0,u=i.startPos?Math.min(i.startPos,a):0,c=void 0===i.endLine||null===i.endLine?s:Math.min(i.endLine,s),h=r[c]?r[c].length:0,f=void 0===i.endPos||null===i.endPos?h:Math.min(i.endPos,h),{startPos:su.getTextareaPositionByLineAndOffset(n,l,0)+u,endPos:su.getTextareaPositionByLineAndOffset(n,c,0)+f}):{startPos:v,endPos:g}},au.cursor=ki,au.getNextFocusableElement=ll,au.SHORTCUT_TYPE=El,au.getSelectionCoordinatesByPosition=Ea,au.getElementFromPoint=H;var uu=h.nativeMethods,cu=h.EVENTS.evalIframeScript;uu.objectDefineProperty(fu,"%testCafeAutomation%",{configurable:!0,value:au}),h.on(cu,function(t){return hu(uu.contentWindowGetter.call(t.iframe))})}(fu["%hammerhead%"],fu["%testCafeCore%"],fu["%hammerhead%"].Promise,fu["%testCafeUI%"])}(window);